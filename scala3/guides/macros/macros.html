<!DOCTYPE html>

<html class="scala3">

  <head>
    <title>
      Scala 3 Macros | 
      Macros in Scala 3 | 
      Scala Documentation
    </title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:site_name" content="Scala Documentation"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://0.0.0.0:4000/scala3/guides/macros/macros.html"/>
    <meta property="og:image" content="http://0.0.0.0:4000/resources/img/scala-spiral-3d-2-toned-down.png"/>
    <meta property="og:title" content="Scala 3 Macros"/>
    

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@scala_lang"/>
    <meta name="twitter:creator" content="@scala_lang"/>
    <meta name="twitter:title" content="Scala 3 Macros"/>
    

    <link rel="icon" type="image/png" href="docs.scala-lang/resources/favicon.ico">
    <link rel="shortcut icon" type="image/png" href="docs.scala-lang/resources/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="docs.scala-lang/resources/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="docs.scala-lang/resources/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="docs.scala-lang/resources/favicon-16x16.png">
    <link rel="manifest" href="docs.scala-lang/resources/site.webmanifest">
    <link rel="mask-icon" href="docs.scala-lang/resources/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#15a9ce">
    <meta name="theme-color" content="#ffffff">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!-- Custom stylesheet -->
    <link href="docs.scala-lang/resources/css/unslider-dots.css" rel="stylesheet" type="text/css">
    <link href="docs.scala-lang/resources/css/unslider.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="docs.scala-lang/resources/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="docs.scala-lang/resources/css/style.css" type="text/css" />
    <link rel="stylesheet" href="docs.scala-lang/resources/css/monospace.css" type="text/css" />

    <!-- Atom feeds -->
    <link rel="alternate" type="application/atom+xml" title="News Feed" href="http://scala-lang.org/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Feed" href="http://scala-lang.org/feed/blog.xml" />

    <!-- Algolia stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head>
  <body>





<div class="navigation-fade-screen"></div>



<header id="site-header">
  <div class="wrap">
    <nav class="navigation" role="menu">
      <a href="http://scala-lang.org" class="navigation-bdand">
        <img src="docs.scala-lang/resources/img/frontpage/scala-logo-white@2x.png" alt="">
      </a>
      <div class="navigation-panel-button">
        <i class="fa fa-bars"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              <a href="docs.scala-lang/" class="active">Documentation</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/download/" >Download</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/community/" >Community</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://index.scala-lang.org" >Libraries</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/contribute/" >Contribute</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/blog/" >Blog</a>
            </li>
        
      </ul>
    </nav>
  </div>
</header>



<header id="doc-header" class="scala3">

  <div class="wrap" style="padding: 0px;">
    <nav class="doc-navigation" role="menu">
      
      <div class="navigation-bdand">
      <a href="docs.scala-lang/">
        <img src="docs.scala-lang/resources/img/documentation-logo@2x.png" alt="docs">
      </a>
      <span class="doc-language-version">
        — Scala  3 
      </span>
      </div>
      <div class="navigation-ellipsis">
        <i class="fa fa-ellipsis-v"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              
              
              <a href="#" id="learn" >Learn</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    
                    
                    <a href="docs.scala-lang/scala3/new-in-scala3.html">New in Scala 3</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="docs.scala-lang/scala3/getting-started.html">Getting Started</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="docs.scala-lang/scala3/book/introduction.html">Scala 3 Book</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="docs.scala-lang/scala3/guides/macros/index.html">Macro Tutorial</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="docs.scala-lang/scala3/guides/migration/compatibility-intro.html" id="migrate" >Migrate</a>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="docs.scala-lang/scala3/reference/overview.html" id="reference" >Reference</a>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="https://dotty.epfl.ch/api/index.html" id="api" >API</a>
                
            </li>
        
      </ul>
    </nav>
    <nav class="doc-navigation-submenus">
      
        
          <ul class="navigation-submenu" id="learn" style="display: none;">
            
              <li>
                <a href="docs.scala-lang/scala3/new-in-scala3.html">New in Scala 3</a>
              </li>
            
              <li>
                <a href="docs.scala-lang/scala3/getting-started.html">Getting Started</a>
              </li>
            
              <li>
                <a href="docs.scala-lang/scala3/book/introduction.html">Scala 3 Book</a>
              </li>
            
              <li>
                <a href="docs.scala-lang/scala3/guides/macros/index.html">Macro Tutorial</a>
              </li>
            
          </ul>
        
      
        
      
        
      
        
      
      <ul class="navigation-submenu ellipsis-menu" style="display: none;">
        
          
        
          
        
          
        
          
            <li><a href="https://dotty.epfl.ch/api/index.html">API</a></li>
          
        
      </ul>
    </nav>
  </div>
</header>


<main id="inner-main">
  <!-- Title -->
  <section class="title-page">
    <div class="wrap">
      <div class="content-title-documentation">
        
          <div class="wip-notice">
            <h4>Work in Progress</h4>
            <p>
              We are still in the process of writing the documentation for Scala 3.
              You can <a  href="/scala3/contribute-to-docs.html">help us</a> to improve the documentation.
            </p>
            <p>Are you searching for the <a href="/">Scala 2 documentation</a>?</p>
          </div>
        

        <div class="titles">
          
            <div class="supertitle">Macros in Scala 3</div>
          
          <h1>Scala 3 Macros</h1>
        </div>
        <div class="language-dropdown">
          <div id="dd" class="wrapper-dropdown" tabindex="1">
            <span>Language</span>
              <ul class="dropdown"></ul>
          </div>
      </div>
    </div>
  </section>

  
  <section class="content">
	<div class="wrap">
		<div class="content-primary documentation">
			<div class="inner-box">
				<div class="toc-context">
					<p><a href="/scala3/guides/macros/inline.html">Inline methods</a> provide us with a elegant technique for metaprogramming by performing some operations at compile time.
However, sometimes inlining is not enough and we need more powerful ways to analyze and synthesize programs at compile time.
Macros enable us to do exactly this: treat <strong>programs as data</strong> and manipulate them.</p>

<h2 id="macros-treat-programs-as-values">Macros Treat Programs as Values</h2>
<p>With a macro, we can treat programs as values, which allows us to analyze and generate them at compile time.
A Scala expression with type <code class="language-plaintext highlighter-rouge">T</code> is represented by an instance of the type <code class="language-plaintext highlighter-rouge">scala.quoted.Expr[T]</code>.</p>

<p>We will dig into the details of the type <code class="language-plaintext highlighter-rouge">Expr[T]</code>, as well as the different ways of analyzing and constructing instances, when talking about <a href="/scala3/guides/macros/quotes.html">Quoted Code</a> and <a href="/scala3/guides/macros/reflection.html">Reflection</a>.
For now, it suffices to know that macros are metaprograms that manipulate expressions of type <code class="language-plaintext highlighter-rouge">Expr[T]</code>.</p>

<p>The following macro implementation simply prints the expression of the provided argument:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">inspectCode</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Any</span><span class="o">])(</span><span class="n">using</span> <span class="nc">Quotes</span><span class="o">)</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Any</span><span class="o">]</span> <span class="k">=</span>
  <span class="nf">println</span><span class="o">(</span><span class="nv">x</span><span class="o">.</span><span class="py">show</span><span class="o">)</span>
  <span class="n">x</span>
</code></pre></div></div>
<p>After printing the argument expression, we return the original argument as a Scala expression of type <code class="language-plaintext highlighter-rouge">Expr[Any]</code>.</p>

<p>As foreshadowed in the section on <a href="/scala3/guides/macros/inline.html">Inline</a>, inline methods provide the entry point for macro definitions:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">inline</span> <span class="k">def</span> <span class="nf">inspect</span><span class="o">(</span><span class="n">inline</span> <span class="n">x</span><span class="k">:</span> <span class="kt">Any</span><span class="o">)</span><span class="k">:</span> <span class="kt">Any</span> <span class="o">=</span> <span class="n">$</span><span class="o">{</span> <span class="nf">inspectCode</span><span class="o">(</span><span class="ss">'x</span><span class="o">)</span> <span class="o">}</span>
</code></pre></div></div>
<p>All macros are defined with an <code class="language-plaintext highlighter-rouge">inline def</code>.
The implementation of this entry point always has the same shape:</p>

<ul>
  <li>they only contain a single <a href="/scala3/guides/macros/quotes.html">splice</a> <code class="language-plaintext highlighter-rouge">${ ... }</code></li>
  <li>the splice contains a single call to the method that implements the macro (for example <code class="language-plaintext highlighter-rouge">inspectCode</code>).</li>
  <li>the call to the macro implementation receives the <em>quoted</em> parameters (that is <code class="language-plaintext highlighter-rouge">'x</code> instead of <code class="language-plaintext highlighter-rouge">x</code>) and a contextual <code class="language-plaintext highlighter-rouge">Quotes</code>.</li>
</ul>

<p>We will dig deeper into these concepts later in this and the following sections.</p>

<p>Calling our <code class="language-plaintext highlighter-rouge">inspect</code> macro <code class="language-plaintext highlighter-rouge">inspect(sys error "abort")</code> prints a string representation of the argument expression at compile time:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala.sys.error("abort")
</code></pre></div></div>

<h3 id="macros-and-type-parameters">Macros and Type Parameters</h3>

<p>If the macro has type parameters, the implementation will also need to know about them.
Just like <code class="language-plaintext highlighter-rouge">scala.quoted.Expr[T]</code> represents a Scala expression of type <code class="language-plaintext highlighter-rouge">T</code>, we use <code class="language-plaintext highlighter-rouge">scala.quoted.Type[T]</code> to represent the Scala type <code class="language-plaintext highlighter-rouge">T</code>.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">inline</span> <span class="k">def</span> <span class="nf">logged</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">inline</span> <span class="n">x</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> <span class="n">$</span><span class="o">{</span> <span class="nf">loggedCode</span><span class="o">(</span><span class="ss">'x</span><span class="o">)</span>  <span class="o">}</span>

<span class="k">def</span> <span class="nf">loggedCode</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">x</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">T</span><span class="o">])(</span><span class="n">using</span> <span class="nc">Type</span><span class="o">[</span><span class="kt">T</span><span class="o">],</span> <span class="nc">Quotes</span><span class="o">)</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
</code></pre></div></div>
<p>Both the instance of <code class="language-plaintext highlighter-rouge">Type[T]</code> and the contextual <code class="language-plaintext highlighter-rouge">Quotes</code> are automatically provided by the splice in the corresponding inline method (that is, <code class="language-plaintext highlighter-rouge">logged</code>) and can be used by the macro implementation.</p>

<h3 id="defining-and-using-macros">Defining and Using Macros</h3>

<p>A key difference between inlining and macros is the way they are evaluated.
Inlining works by rewriting code and performing optimisations based on rules the compiler knows.
On the other hand, a macro executes user-written code that generates the code that the macro expands to.</p>

<p>Technically, compiling the inlined code <code class="language-plaintext highlighter-rouge">${ inspectCode('x)  }</code> calls the method <code class="language-plaintext highlighter-rouge">inspectCode</code> <em>at compile time</em> (through Java reflection), and the method <code class="language-plaintext highlighter-rouge">inspectCode</code> then executes as normal code.</p>

<p>To be able to execute <code class="language-plaintext highlighter-rouge">inspectCode</code>, we need to compile its source code first.
As a technicaly consequence, we cannot define and use a macro in the <strong>same class/file</strong>.
However, it is possible to have the macro definition and its call in the <strong>same project</strong> as long as the implementation of the macro can be compiled first.</p>

<blockquote>
  <h5 id="suspended-files">Suspended Files</h5>
  <p>To allow defining and using macros in the same project, only those calls to macros are expanded, where the macro has already been compiled.
For all other (unknown) macro calls, the compilation of the file is <em>suspended</em>.
Suspended files are only compiled after all non suspended files have been successfully compiled.
In some cases, you will have <em>cyclic dependencies</em> that will block the completion of the compilation.
To get more information on which files are suspended you can use the <code class="language-plaintext highlighter-rouge">-Xprint-suspension</code> compiler flag.</p>
</blockquote>

<h3 id="example-statically-evaluating-power-with-macros">Example: Statically Evaluating <code class="language-plaintext highlighter-rouge">power</code> with Macros</h3>

<p>Let us recall our definition of <code class="language-plaintext highlighter-rouge">power</code> from the section on <a href="/scala3/guides/macros/inline.html">Inline</a> that specialized the computation of <code class="language-plaintext highlighter-rouge">xⁿ</code> for statically known values of <code class="language-plaintext highlighter-rouge">n</code>.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">inline</span> <span class="k">def</span> <span class="nf">power</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">inline</span> <span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span>
  <span class="n">inline</span> <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="n">then</span> <span class="mf">1.0</span>
  <span class="k">else</span> <span class="n">inline</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="n">then</span> <span class="n">x</span> <span class="o">*</span> <span class="nf">power</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span>
  <span class="k">else</span> <span class="nf">power</span><span class="o">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="o">,</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="o">)</span>
</code></pre></div></div>
<p>In the remainder of this section, we will define a macro that computes <code class="language-plaintext highlighter-rouge">xⁿ</code> for a statically known values <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">n</code>.
While this is also possible purely with <code class="language-plaintext highlighter-rouge">inline</code>, implementing it with macros will illustrate a few things.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">inline</span> <span class="k">def</span> <span class="nf">power</span><span class="o">(</span><span class="n">inline</span> <span class="n">x</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">inline</span> <span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span>
  <span class="n">$</span><span class="o">{</span> <span class="nf">powerCode</span><span class="o">(</span><span class="ss">'x</span><span class="o">,</span> <span class="ss">'n</span><span class="o">)</span>  <span class="o">}</span>

<span class="k">def</span> <span class="nf">powerCode</span><span class="o">(</span>
  <span class="n">x</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Double</span><span class="o">],</span>
  <span class="n">n</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
<span class="o">)(</span><span class="n">using</span> <span class="nc">Quotes</span><span class="o">)</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
</code></pre></div></div>

<h2 id="simple-expressions">Simple Expressions</h2>

<p>We could implement <code class="language-plaintext highlighter-rouge">powerCode</code> as follows:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">pow</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="n">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">x</span> <span class="o">*</span> <span class="nf">pow</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span>

<span class="k">def</span> <span class="nf">powerCode</span><span class="o">(</span>
  <span class="n">x</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Double</span><span class="o">],</span>
  <span class="n">n</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
<span class="o">)(</span><span class="n">using</span> <span class="nc">Quotes</span><span class="o">)</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span>
  <span class="k">val</span> <span class="nv">value</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="nf">pow</span><span class="o">(</span><span class="nv">x</span><span class="o">.</span><span class="py">valueOrError</span><span class="o">,</span> <span class="nv">n</span><span class="o">.</span><span class="py">valueOrError</span><span class="o">)</span>
  <span class="nc">Expr</span><span class="o">(</span><span class="n">value</span><span class="o">)</span>
</code></pre></div></div>
<p>Here, the <code class="language-plaintext highlighter-rouge">pow</code> operation is a simple Scala function that computes the value of <code class="language-plaintext highlighter-rouge">xⁿ</code>.
The interesting part is how we create and look into the <code class="language-plaintext highlighter-rouge">Expr</code>s.</p>

<h3 id="creating-expression-from-values">Creating Expression From Values</h3>

<p>Let’s first look at <code class="language-plaintext highlighter-rouge">Expr.apply(value)</code>. Given a value of type <code class="language-plaintext highlighter-rouge">T</code>, this call will return an expression containing the code representing the given value (that is, of type <code class="language-plaintext highlighter-rouge">Expr[T]</code>).
The argument value to <code class="language-plaintext highlighter-rouge">Expr</code> is computed at compile-time, at runtime we only need to instantiate this value.</p>

<p>Creating expressions from values works for all <em>primitive types</em>, <em>tuples</em> of any arity, <code class="language-plaintext highlighter-rouge">Class</code>, <code class="language-plaintext highlighter-rouge">Array</code>, <code class="language-plaintext highlighter-rouge">Seq</code>, <code class="language-plaintext highlighter-rouge">Set</code>, <code class="language-plaintext highlighter-rouge">List</code>, <code class="language-plaintext highlighter-rouge">Map</code>, <code class="language-plaintext highlighter-rouge">Option</code>, <code class="language-plaintext highlighter-rouge">Either</code>, <code class="language-plaintext highlighter-rouge">BigInt</code>, <code class="language-plaintext highlighter-rouge">BigDecimal</code>, <code class="language-plaintext highlighter-rouge">StringContext</code>.
Other types can also work if a <code class="language-plaintext highlighter-rouge">ToExpr</code> is implemented for it, we will <a href="/scala3/guides/macros/quotes.html">see this later</a>.</p>

<h3 id="extracting-values-from-expressions">Extracting Values from Expressions</h3>

<p>The second method we use in the implementation of <code class="language-plaintext highlighter-rouge">powerCode</code> is <code class="language-plaintext highlighter-rouge">Expr[T].valueOrError</code>, which has an effect opposite to <code class="language-plaintext highlighter-rouge">Expr.apply</code>.
It attempts to extract a value of type <code class="language-plaintext highlighter-rouge">T</code> from an expression of type <code class="language-plaintext highlighter-rouge">Expr[T]</code>.
This can only succeed, if the expression directly contains the code of a value, otherwise, it will throw an exception that stops the macro expansion and reports that the expression did not correspond to a value.</p>

<p>Instead of <code class="language-plaintext highlighter-rouge">valueOrError</code>, we could also use the <code class="language-plaintext highlighter-rouge">value</code> operation, which will return an <code class="language-plaintext highlighter-rouge">Option</code>.
This way we can report the error with a custom error message.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">...</span>
  <span class="o">(</span><span class="nv">x</span><span class="o">.</span><span class="py">value</span><span class="o">,</span> <span class="nv">n</span><span class="o">.</span><span class="py">value</span><span class="o">)</span> <span class="k">match</span>
    <span class="nf">case</span> <span class="o">(</span><span class="nc">Some</span><span class="o">(</span><span class="n">base</span><span class="o">),</span> <span class="nc">Some</span><span class="o">(</span><span class="n">exponent</span><span class="o">))</span> <span class="k">=&gt;</span>
      <span class="nf">pow</span><span class="o">(</span><span class="n">base</span><span class="o">,</span> <span class="n">exponent</span><span class="o">)</span>
    <span class="nf">case</span> <span class="o">(</span><span class="nc">Some</span><span class="o">(</span><span class="k">_</span><span class="o">),</span> <span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span>
      <span class="nv">report</span><span class="o">.</span><span class="py">error</span><span class="o">(</span><span class="s">"Expected a known value for the exponent, but was "</span> <span class="o">+</span> <span class="nv">n</span><span class="o">.</span><span class="py">show</span><span class="o">,</span> <span class="n">n</span><span class="o">)</span>
    <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span>
      <span class="nv">report</span><span class="o">.</span><span class="py">error</span><span class="o">(</span><span class="s">"Expected a known value for the base, but was "</span> <span class="o">+</span> <span class="nv">x</span><span class="o">.</span><span class="py">show</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div></div>

<p>Alternatively, we can also use the <code class="language-plaintext highlighter-rouge">Expr.unapply</code> extractor</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">...</span>
  <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">n</span><span class="o">)</span> <span class="k">match</span>
    <span class="nf">case</span> <span class="o">(</span><span class="nc">Expr</span><span class="o">(</span><span class="n">base</span><span class="o">),</span> <span class="nc">Expr</span><span class="o">(</span><span class="n">exponent</span><span class="o">))</span> <span class="k">=&gt;</span>
      <span class="nf">pow</span><span class="o">(</span><span class="n">base</span><span class="o">,</span> <span class="n">exponent</span><span class="o">)</span>
    <span class="nf">case</span> <span class="o">(</span><span class="nc">Expr</span><span class="o">(</span><span class="k">_</span><span class="o">),</span> <span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="o">...</span>
    <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="o">...</span>
</code></pre></div></div>
<p>The operations <code class="language-plaintext highlighter-rouge">value</code>, <code class="language-plaintext highlighter-rouge">valueOrError</code>, and <code class="language-plaintext highlighter-rouge">Expr.unapply</code> will work for all <em>primitive types</em>, <em>tuples</em> of any arity, <code class="language-plaintext highlighter-rouge">Option</code>, <code class="language-plaintext highlighter-rouge">Seq</code>, <code class="language-plaintext highlighter-rouge">Set</code>, <code class="language-plaintext highlighter-rouge">Map</code>, <code class="language-plaintext highlighter-rouge">Either</code> and <code class="language-plaintext highlighter-rouge">StringContext</code>.
Other types can also work if an <code class="language-plaintext highlighter-rouge">FromExpr</code> is implemented for it, we will <a href="/scala3/guides/macros/quotes.html">see this later</a>.</p>

<h3 id="showing-expressions">Showing Expressions</h3>

<p>In the implementation of <code class="language-plaintext highlighter-rouge">inspectCode</code>, we have already seen how to convert expressions to the string representation of their <em>source code</em> using the <code class="language-plaintext highlighter-rouge">.show</code> method.
This can be useful to perform debugging on macro implementations:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">debugPowerCode</span><span class="o">(</span>
  <span class="n">x</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Double</span><span class="o">],</span>
  <span class="n">n</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
<span class="o">)(</span><span class="n">using</span> <span class="nc">Quotes</span><span class="o">)</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span>
  <span class="nf">println</span><span class="o">(</span>
    <span class="n">s</span><span class="s">"""powerCode
       |  x := ${x.show}
       |  n := ${n.show}"""</span><span class="o">.</span><span class="py">stripMargin</span><span class="o">)</span>
  <span class="k">val</span> <span class="nv">code</span> <span class="k">=</span> <span class="nf">powerCode</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">n</span><span class="o">)</span>
  <span class="nf">println</span><span class="o">(</span><span class="n">s</span><span class="s">"  code := ${code.show}"</span><span class="o">)</span>
  <span class="n">code</span>
</code></pre></div></div>

<h3 id="working-with-varargs">Working with Varargs</h3>

<p>Varargs in Scala are represented with <code class="language-plaintext highlighter-rouge">Seq</code>, hence when we write a macro with a <em>vararg</em>, it will be passed as an <code class="language-plaintext highlighter-rouge">Expr[Seq[T]]</code>.
It is possible to recover each individual argument (of type <code class="language-plaintext highlighter-rouge">Expr[T]</code>) using the <code class="language-plaintext highlighter-rouge">scala.quoted.Varargs</code> extractor.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">scala.quoted.Varargs</span>

<span class="n">inline</span> <span class="k">def</span> <span class="nf">sumNow</span><span class="o">(</span><span class="n">inline</span> <span class="n">nums</span><span class="k">:</span> <span class="kt">Int*</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span>
  <span class="n">$</span><span class="o">{</span> <span class="nf">sumCode</span><span class="o">(</span><span class="ss">'nums</span><span class="o">)</span>  <span class="o">}</span>

<span class="k">def</span> <span class="nf">sumCode</span><span class="o">(</span><span class="n">nums</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]])(</span><span class="n">using</span> <span class="nc">Quotes</span><span class="o">)</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">nums</span> <span class="k">match</span>
    <span class="k">case</span>  <span class="nc">Varargs</span><span class="o">(</span><span class="n">numberExprs</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="c1">// numberExprs: Seq[Expr[Int]]</span>
      <span class="k">val</span> <span class="nv">numbers</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nv">numberExprs</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">valueOrError</span><span class="o">)</span>
      <span class="nc">Expr</span><span class="o">(</span><span class="nv">numbers</span><span class="o">.</span><span class="py">sum</span><span class="o">)</span>
    <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="nv">report</span><span class="o">.</span><span class="py">error</span><span class="o">(</span>
      <span class="s">"Expected explicit argument"</span> <span class="o">+</span>
      <span class="s">"Notation `args: _*` is not supported."</span><span class="o">,</span> <span class="n">numbersExpr</span><span class="o">)</span>
</code></pre></div></div>

<p>The extractor will match a call to <code class="language-plaintext highlighter-rouge">sumNow(1, 2, 3)</code> and extract a <code class="language-plaintext highlighter-rouge">Seq[Expr[Int]]</code> containing the code of each parameter.
But, if we try to match the argument of the call <code class="language-plaintext highlighter-rouge">sumNow(nums: _*)</code>, the extractor will not match.</p>

<p><code class="language-plaintext highlighter-rouge">Varargs</code> can also be used as a constructor, <code class="language-plaintext highlighter-rouge">Varargs(Expr(1), Expr(2), Expr(3))</code> will return a <code class="language-plaintext highlighter-rouge">Expr[Seq[Int]]</code>.
We will see how this can be useful later.</p>

<h2 id="complex-expressions">Complex Expressions</h2>
<p>So far, we have only seen how to construct and destruct expressions that correspond to simple values.
In order to work with more complex expressions, Scala 3 offers different metaprogramming facilities ranging from</p>

<ul>
  <li>additional constructors like <code class="language-plaintext highlighter-rouge">Expr.apply</code>,</li>
  <li>over <a href="/scala3/guides/macros/quotes.html">quoted pattern matching</a>,</li>
  <li>to a full <a href="/scala3/guides/macros/reflection.html">reflection API</a>;</li>
</ul>

<p>each increasing in complexity and potentially losing safety guarantees.
It is generally recommended to prefer simple APIs over more advanced ones.
In the remainder of this section, we introduce some more additional constructors and destructors,
while subsequent chapters introduce the more advanced APIs.</p>

<h3 id="collections">Collections</h3>

<p>We have seen how to convert a <code class="language-plaintext highlighter-rouge">List[Int]</code> into an <code class="language-plaintext highlighter-rouge">Expr[List[Int]]</code> using <code class="language-plaintext highlighter-rouge">Expr.apply</code>.
How about converting a <code class="language-plaintext highlighter-rouge">List[Expr[Int]]</code> into <code class="language-plaintext highlighter-rouge">Expr[List[Int]]</code>?
We mentioned that <code class="language-plaintext highlighter-rouge">Varargs.apply</code> can do this for sequences – likewise for other collection types, corresponding methods are available:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Expr.ofList</code>: Transform a <code class="language-plaintext highlighter-rouge">List[Expr[T]]</code> into <code class="language-plaintext highlighter-rouge">Expr[List[T]]</code></li>
  <li><code class="language-plaintext highlighter-rouge">Expr.ofSeq</code>: Transform a <code class="language-plaintext highlighter-rouge">Seq[Expr[T]]</code> into <code class="language-plaintext highlighter-rouge">Expr[Seq[T]]</code> (just like <code class="language-plaintext highlighter-rouge">Varargs</code>)</li>
  <li><code class="language-plaintext highlighter-rouge">Expr.ofTupleFromSeq</code>: Transform a <code class="language-plaintext highlighter-rouge">Seq[Expr[T]]</code> into <code class="language-plaintext highlighter-rouge">Expr[Tuple]</code></li>
  <li><code class="language-plaintext highlighter-rouge">Expr.ofTuple</code>: Transform a <code class="language-plaintext highlighter-rouge">(Expr[T1], ..., Expr[Tn])</code> into <code class="language-plaintext highlighter-rouge">Expr[(T1, ..., Tn)]</code></li>
</ul>

<h3 id="simple-blocks">Simple Blocks</h3>

<p>The constructor <code class="language-plaintext highlighter-rouge">Expr.block</code> provides a simple way to create a block of code <code class="language-plaintext highlighter-rouge">{ stat1; ...; statn; expr }</code>.
Its first arguments is a list with all the statements and the second argument is the expression at the end of the block.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">inline</span> <span class="k">def</span> <span class="nf">test</span><span class="o">(</span><span class="n">inline</span> <span class="n">ignore</span><span class="k">:</span> <span class="kt">Boolean</span><span class="o">,</span> <span class="n">computation</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Unit</span><span class="o">)</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span>
  <span class="n">$</span><span class="o">{</span> <span class="nf">testCode</span><span class="o">(</span><span class="ss">'ignore</span><span class="o">,</span> <span class="ss">'computation</span><span class="o">)</span> <span class="o">}</span>

<span class="k">def</span> <span class="nf">testCode</span><span class="o">(</span><span class="n">ignore</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Boolean</span><span class="o">],</span> <span class="n">computation</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Unit</span><span class="o">])(</span><span class="n">using</span> <span class="nc">Quotes</span><span class="o">)</span> <span class="k">=</span>
  <span class="k">if</span> <span class="nv">ignore</span><span class="o">.</span><span class="py">valueOrError</span> <span class="n">then</span> <span class="nc">Expr</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>
  <span class="k">else</span> <span class="nv">Expr</span><span class="o">.</span><span class="py">block</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="n">computation</span><span class="o">),</span> <span class="nc">Expr</span><span class="o">(</span><span class="kc">true</span><span class="o">))</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">Expr.block</code> constructor is useful when we want to generate code contanining several side effects.
The macro call <code class="language-plaintext highlighter-rouge">test(false, EXPRESSION)</code> will generate <code class="language-plaintext highlighter-rouge">{ EXPRESSION; true}</code>, while the call <code class="language-plaintext highlighter-rouge">test(true, EXPRESSION)</code> will result in <code class="language-plaintext highlighter-rouge">false</code>.</p>

<h3 id="simple-matching">Simple Matching</h3>

<p>The method <code class="language-plaintext highlighter-rouge">Expr.matches</code> can be used to check if one expression is equal to another.
With this method we could implement an <code class="language-plaintext highlighter-rouge">value</code> operation for <code class="language-plaintext highlighter-rouge">Expr[Boolean]</code> as follows.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">value</span><span class="o">(</span><span class="n">boolExpr</span><span class="k">:</span> <span class="kt">Expr</span><span class="o">[</span><span class="kt">Boolean</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Boolean</span><span class="o">]</span> <span class="k">=</span>
  <span class="k">if</span> <span class="nv">boolExpr</span><span class="o">.</span><span class="py">matches</span><span class="o">(</span><span class="nc">Expr</span><span class="o">(</span><span class="kc">true</span><span class="o">))</span> <span class="n">then</span> <span class="nc">Some</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
  <span class="k">else</span> <span class="k">if</span> <span class="nv">boolExpr</span><span class="o">.</span><span class="py">matches</span><span class="o">(</span><span class="nc">Expr</span><span class="o">(</span><span class="kc">false</span><span class="o">))</span> <span class="n">then</span> <span class="nc">Some</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>
  <span class="k">else</span> <span class="nc">None</span>
</code></pre></div></div>

<p>It may also be used to compare two user written expression.
Note, that <code class="language-plaintext highlighter-rouge">matches</code> only performs a limited amount of normalization and while for instance the Scala expression <code class="language-plaintext highlighter-rouge">2</code> matches the expression <code class="language-plaintext highlighter-rouge">{ 2 }</code>, this is <em>not the case</em> for the expression <code class="language-plaintext highlighter-rouge">{ val x: Int = 2; x }</code>.</p>

<h3 id="arbitrary-expressions">Arbitrary Expressions</h3>

<p>Last but not least, it is possible to create an <code class="language-plaintext highlighter-rouge">Expr[T]</code> from arbitary Scala code by enclosing it in <a href="/scala3/guides/macros/quotes.html">quotes</a>.
For example <code class="language-plaintext highlighter-rouge">'{ ${expr}; true }</code> will generate an <code class="language-plaintext highlighter-rouge">Expr[Int]</code> equivalent to <code class="language-plaintext highlighter-rouge">Expr.block(List(expr), Expr(true))</code>.
The subsequent section on <a href="/scala3/guides/macros/quotes.html">Quoted Code</a> presents quotes in more detail.</p>


				</div>

				<div class="two-columns">
					
					<a href="compiletime.html">&larr; <strong>previous</strong></a>
					
					
					<a href="quotes.html"><strong>next</strong> &rarr;</a>
					
				</div>

				<div class="content-contributors">
    <h3>Contributors to this page:</h3>
    <div id="contributors" class="contributors-container"></div>
</div>

			</div>
		</div>

		<!-- TOC -->
		<div class="content-nav">
	<div class="inner-box sidebar-toc-wrapper" style="">
		<h5 class="contents">Contents</h5>
        
        
          <div class="inner-toc book" id="sidebar-toc">
        

      <ul>
        
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
             <!-- this must be English, so get the other documents' titles -->

               <!-- if a type is set in a document, we add it as a class. Used in Scala book to diff between chapter and section -->
                <li class="type-chapter"><a  href="docs.scala-lang/scala3/guides/macros/index.html">Tutorial</a></li>
              
            
          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
             <!-- this must be English, so get the other documents' titles -->

               <!-- if a type is set in a document, we add it as a class. Used in Scala book to diff between chapter and section -->
                <li class="type-section"><a  href="docs.scala-lang/scala3/guides/macros/inline.html">Inline</a></li>
              
            
          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
             <!-- this must be English, so get the other documents' titles -->

               <!-- if a type is set in a document, we add it as a class. Used in Scala book to diff between chapter and section -->
                <li class="type-section"><a  href="docs.scala-lang/scala3/guides/macros/compiletime.html">Scala Compile-time Operations</a></li>
              
            
          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
             <!-- this must be English, so get the other documents' titles -->

               <!-- if a type is set in a document, we add it as a class. Used in Scala book to diff between chapter and section -->
                <li class="type-section"><a class="active" href="docs.scala-lang/scala3/guides/macros/macros.html">Scala 3 Macros</a>
						<div id="toc"></div>
						</li>
              
            
          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
             <!-- this must be English, so get the other documents' titles -->

               <!-- if a type is set in a document, we add it as a class. Used in Scala book to diff between chapter and section -->
                <li class="type-section"><a  href="docs.scala-lang/scala3/guides/macros/quotes.html">Quoted Code</a>
						<div id="toc"></div>
						</li>
              
            
          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
             <!-- this must be English, so get the other documents' titles -->

               <!-- if a type is set in a document, we add it as a class. Used in Scala book to diff between chapter and section -->
                <li class="type-section"><a  href="docs.scala-lang/scala3/guides/macros/reflection.html">Reflection</a>
						<div id="toc"></div>
						</li>
              
            
          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
             <!-- this must be English, so get the other documents' titles -->

               <!-- if a type is set in a document, we add it as a class. Used in Scala book to diff between chapter and section -->
                <li class="type-chapter"><a  href="docs.scala-lang/scala3/guides/macros/faq.html">FAQ</a>
						<div id="toc"></div>
						</li>
              
            
          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
             <!-- this must be English, so get the other documents' titles -->

               <!-- if a type is set in a document, we add it as a class. Used in Scala book to diff between chapter and section -->
                <li class="type-chapter"><a  href="docs.scala-lang/scala3/guides/macros/best-practices.html">Best Practices</a>
						<div id="toc"></div>
						</li>
              
            
          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
             <!-- this must be English, so get the other documents' titles -->

               <!-- if a type is set in a document, we add it as a class. Used in Scala book to diff between chapter and section -->
                <li class="type-chapter"><a  href="docs.scala-lang/scala3/guides/macros/other-resources.html">Other Resources</a>
						<div id="toc"></div>
						</li>
              
            
          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
					

          
        
      </ul>

      
		</div>
		<hr>
		<div class="help-us"><a href="https://github.com/scala/docs.scala-lang/blob/main/_overviews/scala3-macros/tutorial/macros.md"><i class="fa fa-pencil" aria-hidden="true"></i> Problem with this page?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please help us fix it!</a></div>
	</div>
</div>

	</div>
</section>


</main>

<footer id="site-footer">
    <div class="wrap">
      <div class="site-footer-top">
        
          <ul class="documentation">
            <li><h3>Documentation</h3></li>
            
              <li><a href="docs.scala-lang/getting-started.html">Getting Started</a></li>
            
              <li><a href="https://www.scala-lang.org/api/current/index.html">API</a></li>
            
              <li><a href="docs.scala-lang/overviews">Overviews/Guides</a></li>
            
              <li><a href="http://scala-lang.org/files/archive/spec/2.13/">Language Specification</a></li>
            
          </ul>
        
          <ul class="download">
            <li><h3>Download</h3></li>
            
              <li><a href="http://scala-lang.org/download/">Current Version</a></li>
            
              <li><a href="http://scala-lang.org/download/all.html">All versions</a></li>
            
          </ul>
        
          <ul class="community">
            <li><h3>Community</h3></li>
            
              <li><a href="http://scala-lang.org/community/">Community</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#mailing-lists">Mailing Lists</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#chat-rooms">Chat Rooms & More</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#community-libraries-and-tools">Libraries and Tools</a></li>
            
              <li><a href="http://scala.epfl.ch/">The Scala Center</a></li>
            
          </ul>
        
          <ul class="contribute">
            <li><h3>Contribute</h3></li>
            
              <li><a href="http://scala-lang.org/contribute/">How to help</a></li>
            
              <li><a href="http://scala-lang.org/contribute/bug-reporting-guide.html">Report an Issue</a></li>
            
          </ul>
        
          <ul class="scala">
            <li><h3>Scala</h3></li>
            
              <li><a href="http://scala-lang.org/blog/">Blog</a></li>
            
              <li><a href="http://scala-lang.org/conduct/">Code of Conduct</a></li>
            
              <li><a href="http://scala-lang.org/license/">License</a></li>
            
          </ul>
        
          <ul class="social">
            <li><h3>Social</h3></li>
            
              <li><a href="https://github.com/scala/scala">GitHub</a></li>
            
              <li><a href="https://twitter.com/scala_lang">Twitter</a></li>
            
          </ul>
        
      </div>
      <div class="site-footer-bottom">
        <p></p>
        <img src="docs.scala-lang/resources/img/frontpage/scala-logo-white.png" alt="">
      </div>
    </div>
    <a class="back-to-top in" href="#" id="scroll-to-top-btn">
      <i class="fa fa-angle-up"></i>
    </a>
</footer>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
<script>(window.jQuery) || document.write('<script src="docs.scala-lang/scripts/jquery-3.1.1.min.js"><\/script>');</script>
<script src="docs.scala-lang/resources/js/vendor/jquery.autocomplete.js" type="text/javascript"></script>



<script src="docs.scala-lang/scripts/searchbar.js" type="text/javascript"></script>
<link rel="stylesheet" href="docs.scala-lang/scripts/my.css" type="text/css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css">

<!-- moment js -->
<script src="docs.scala-lang/resources/js/vendor/moment.min.js" type="text/javascript"></script>

<!-- tweet feed -->
<script src="docs.scala-lang/resources/js/tweetMachine-update.js" type="text/javascript"></script>

<!-- prettify js -->
<script src="docs.scala-lang/resources/js/vendor/prettify/prettify.js" type="text/javascript"></script>
<script src="docs.scala-lang/resources/js/vendor/prettify/lang-scala.js" type="text/javascript"></script>

<!-- unslider js -->
<script src="docs.scala-lang/resources/js/vendor/unslider.js" type="text/javascript"></script>

<!-- Highlight -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/languages/scala.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/languages/java.min.js" type="text/javascript"></script>

<!-- CodeMirror -->
<script src="docs.scala-lang/resources/js/vendor/codemirror/codemirror.js" type="text/javascript"></script>
<script src="docs.scala-lang/resources/js/vendor/codemirror/clike.js" type="text/javascript"></script>

<!-- TOC -->
<script src="docs.scala-lang/resources/js/vendor/toc.js" type="text/javascript"></script>

<!-- Blog search -->
<script src="docs.scala-lang/resources/js/vendor/jekyll.search.min.js" type="text/javascript"></script>

<!-- Custom JavaScript -->
<script src="docs.scala-lang/resources/js/functions.js" type="text/javascript"></script>



<!-- Alogolia search for doc -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
if ($("#doc-search-bar").length) {
  docsearch({
    apiKey: 'fbc439670f5d4e3730cdcb715c359391',
    indexName: 'scala-lang',
    inputSelector: '#doc-search-bar',
    algoliaOptions: { 'facetFilters': ["language:en"] },
    debug: false // Set debug to true if you want to inspect the dropdown
  });
}
</script>
</body>

</html>

