<!DOCTYPE html>

<html class="scala3">

  <head>
    <title>
      Dependent Function Types - More Details | 
      Scala 3 Language Reference | 
      Scala Documentation
    </title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:site_name" content="Scala Documentation"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://localhost:4000/scala3/reference/new-types/dependent-function-types-spec.html"/>
    <meta property="og:image" content="http://localhost:4000/resources/img/scala-spiral-3d-2-toned-down.png"/>
    <meta property="og:title" content="Dependent Function Types - More Details"/>
    

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@scala_lang"/>
    <meta name="twitter:creator" content="@scala_lang"/>
    <meta name="twitter:title" content="Dependent Function Types - More Details"/>
    

    <link rel="icon" type="image/png" href="/resources/favicon.ico">
    <link rel="shortcut icon" type="image/png" href="/resources/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/resources/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/favicon-16x16.png">
    <link rel="manifest" href="/resources/site.webmanifest">
    <link rel="mask-icon" href="/resources/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#15a9ce">
    <meta name="theme-color" content="#ffffff">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!-- Custom stylesheet -->
    <link href="/resources/css/unslider-dots.css" rel="stylesheet" type="text/css">
    <link href="/resources/css/unslider.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/resources/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/monospace.css" type="text/css" />

    <!-- Atom feeds -->
    <link rel="alternate" type="application/atom+xml" title="News Feed" href="http://scala-lang.org/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Feed" href="http://scala-lang.org/feed/blog.xml" />

    <!-- Algolia stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head>
  <body>





<div class="navigation-fade-screen"></div>



<header id="site-header">
  <div class="wrap">
    <nav class="navigation" role="menu">
      <a href="http://scala-lang.org" class="navigation-bdand">
        <img src="/resources/img/frontpage/scala-logo-white@2x.png" alt="">
      </a>
      <div class="navigation-panel-button">
        <i class="fa fa-bars"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              <a href="/" class="active">Documentation</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/download/" >Download</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/community/" >Community</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://index.scala-lang.org" >Libraries</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/contribute/" >Contribute</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/blog/" >Blog</a>
            </li>
        
      </ul>
    </nav>
  </div>
</header>



<header id="doc-header" class="scala3">

  <div class="wrap" style="padding: 0px;">
    <nav class="doc-navigation" role="menu">
      
      <div class="navigation-bdand">
      <a href="/">
        <img src="/resources/img/documentation-logo@2x.png" alt="docs">
      </a>
      <span class="doc-language-version">
        — Scala  3 
      </span>
      </div>
      <div class="navigation-ellipsis">
        <i class="fa fa-ellipsis-v"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              
              
              <a href="#" id="learn" >Learn</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    
                    
                    <a href="/scala3/new-in-scala3.html">New in Scala 3</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="/scala3/getting-started.html">Getting Started</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="/scala3/book/introduction.html">Scala 3 Book</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="/scala3/guides/macros/index.html">Macro Tutorial</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="/scala3/guides/migration/compatibility-intro.html" id="migrate" >Migrate</a>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="/scala3/reference/overview.html" id="reference" >Reference</a>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="https://scala-lang.org/api/3.x/" id="api" >API</a>
                
            </li>
        
      </ul>
    </nav>
    <nav class="doc-navigation-submenus">
      
        
          <ul class="navigation-submenu" id="learn" style="display: none;">
            
              <li>
                <a href="/scala3/new-in-scala3.html">New in Scala 3</a>
              </li>
            
              <li>
                <a href="/scala3/getting-started.html">Getting Started</a>
              </li>
            
              <li>
                <a href="/scala3/book/introduction.html">Scala 3 Book</a>
              </li>
            
              <li>
                <a href="/scala3/guides/macros/index.html">Macro Tutorial</a>
              </li>
            
          </ul>
        
      
        
      
        
      
        
      
      <ul class="navigation-submenu ellipsis-menu" style="display: none;">
        
          
        
          
        
          
        
          
            <li><a href="https://scala-lang.org/api/3.x/">API</a></li>
          
        
      </ul>
    </nav>
  </div>
</header>


<main id="inner-main">
  <!-- Title -->
  <section class="title-page">
    <div class="wrap">
      <div class="content-title-documentation">
        
          <div class="wip-notice">
            <h4>Work in Progress</h4>
            <p>
              We are still in the process of writing the documentation for Scala 3.
              You can <a  href="/scala3/contribute-to-docs.html">help us</a> to improve the documentation.
            </p>
            <p>Are you searching for the <a href="/">Scala 2 documentation</a>?</p>
          </div>
        

        <div class="titles">
          
            <div class="supertitle">Scala 3 Language Reference</div>
          
          <h1>Dependent Function Types - More Details</h1>
        </div>
        <div class="language-dropdown">
          <div id="dd" class="wrapper-dropdown" tabindex="1">
            <span>Language</span>
              <ul class="dropdown"></ul>
          </div>
      </div>
    </div>
  </section>

  
  <section class="content">
	<div class="wrap">
		<div class="content-primary documentation">
			<div class="inner-box">
				<div class="toc-context">
					<!-- THIS FILE HAS BEEN GENERATED BY SCALADOC PREPROCESSOR. NOTE THAT ANY CHANGES TO THIS FILE CAN BE OVERRIDEN IN THE FUTURE -->

<p>Initial implementation in <a href="https://github.com/lampepfl/dotty/pull/3464">PR #3464</a>.</p>

<h2 id="syntax">Syntax</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FunArgTypes       ::=  InfixType
                    |  ‘(’ [ FunArgType {',' FunArgType } ] ‘)’
                    |  ‘(’ TypedFunParam {',' TypedFunParam } ‘)’
TypedFunParam     ::=  id ‘:’ Type
</code></pre></div></div>

<p>Dependent function types associate to the right, e.g.
<code class="language-plaintext highlighter-rouge">(s: S) =&gt; (t: T) =&gt; U</code> is the same as <code class="language-plaintext highlighter-rouge">(s: S) =&gt; ((t: T) =&gt; U)</code>.</p>

<h2 id="implementation">Implementation</h2>

<p>Dependent function types are shorthands for class types that define <code class="language-plaintext highlighter-rouge">apply</code>
methods with a dependent result type. Dependent function types desugar to
refinement types of <code class="language-plaintext highlighter-rouge">scala.FunctionN</code>. A dependent function type
<code class="language-plaintext highlighter-rouge">(x1: K1, ..., xN: KN) =&gt; R</code> of arity <code class="language-plaintext highlighter-rouge">N</code> translates to:</p>

<div class="snippet"><div class="buttons"></div><pre><code class="language-scala"><span id="0" class=""><span class="hideable"></span>FunctionN[K1, ..., Kn, R&apos;]:
</span><span id="1" class=""><span class="hideable"></span>  def apply(x1: K1, ..., xN: KN): R
</span></code></pre></div>

<p>where the result type parameter <code class="language-plaintext highlighter-rouge">R'</code> is the least upper approximation of the
precise result type <code class="language-plaintext highlighter-rouge">R</code> without any reference to value parameters <code class="language-plaintext highlighter-rouge">x1, ..., xN</code>.</p>

<p>The syntax and semantics of anonymous dependent functions is identical to the
one of regular functions. Eta expansion is naturally generalized to produce
dependent function types for methods with dependent result types.</p>

<p>Dependent functions can be implicit, and generalize to arity <code class="language-plaintext highlighter-rouge">N &gt; 22</code> in the
same way that other functions do, see
<a href="../dropped-features/limit22.html">the corresponding documentation</a>.</p>

<h2 id="examples">Examples</h2>

<p>The example below defines a trait <code class="language-plaintext highlighter-rouge">C</code> and the two dependent function types
<code class="language-plaintext highlighter-rouge">DF</code> and <code class="language-plaintext highlighter-rouge">IDF</code> and prints the results of the respective function applications:</p>

<div class="snippet"><div class="buttons"></div><pre><code class="language-scala"><span id="0" class=""><span class="hideable"></span>trait C { type M; val m: M }
</span><span id="1" class=""><span class="hideable"></span>
</span><span id="2" class=""><span class="hideable"></span>type DF = (x: C) =&gt; x.M
</span><span id="3" class=""><span class="hideable"></span>
</span><span id="4" class=""><span class="hideable"></span>type IDF = (x: C) ?=&gt; x.M
</span><span id="5" class=""><span class="hideable"></span>
</span><span id="6" class=""><span class="hideable"></span>@main def test =
</span><span id="7" class=""><span class="hideable"></span>  val c = new C { type M = Int; val m = 3 }
</span><span id="8" class=""><span class="hideable"></span>
</span><span id="9" class=""><span class="hideable"></span>  val depfun: DF = (x: C) =&gt; x.m
</span><span id="10" class=""><span class="hideable"></span>  val t = depfun(c)
</span><span id="11" class=""><span class="hideable"></span>  println(s&quot;t=$t&quot;)   // prints &quot;t=3&quot;
</span><span id="12" class=""><span class="hideable"></span>
</span><span id="13" class=""><span class="hideable"></span>  val idepfun: IDF = summon[C].m
</span><span id="14" class=""><span class="hideable"></span>  val u = idepfun(using c)
</span><span id="15" class=""><span class="hideable"></span>  println(s&quot;u=$u&quot;)   // prints &quot;u=3&quot;
</span></code></pre></div>

<p>In the following example the depend type <code class="language-plaintext highlighter-rouge">f.Eff</code> refers to the effect type <code class="language-plaintext highlighter-rouge">CanThrow</code>:</p>

<div class="snippet"><div class="buttons"></div><pre><code class="language-scala"><span id="0" class=""><span class="hideable"></span>trait Effect
</span><span id="1" class=""><span class="hideable"></span>
</span><span id="2" class=""><span class="hideable"></span>// Type X =&gt; Y
</span><span id="3" class=""><span class="hideable"></span>abstract class Fun[-X, +Y]:
</span><span id="4" class=""><span class="hideable"></span>  type Eff &lt;: Effect
</span><span id="5" class=""><span class="hideable"></span>  def apply(x: X): Eff ?=&gt; Y
</span><span id="6" class=""><span class="hideable"></span>
</span><span id="7" class=""><span class="hideable"></span>class CanThrow extends Effect
</span><span id="8" class=""><span class="hideable"></span>class CanIO extends Effect
</span><span id="9" class=""><span class="hideable"></span>
</span><span id="10" class=""><span class="hideable"></span>given ct: CanThrow = new CanThrow
</span><span id="11" class=""><span class="hideable"></span>given ci: CanIO = new CanIO
</span><span id="12" class=""><span class="hideable"></span>
</span><span id="13" class=""><span class="hideable"></span>class I2S extends Fun[Int, String]:
</span><span id="14" class=""><span class="hideable"></span>  type Eff = CanThrow
</span><span id="15" class=""><span class="hideable"></span>  def apply(x: Int) = x.toString
</span><span id="16" class=""><span class="hideable"></span>
</span><span id="17" class=""><span class="hideable"></span>class S2I extends Fun[String, Int]:
</span><span id="18" class=""><span class="hideable"></span>  type Eff = CanIO
</span><span id="19" class=""><span class="hideable"></span>  def apply(x: String) = x.length
</span><span id="20" class=""><span class="hideable"></span>
</span><span id="21" class=""><span class="hideable"></span>// def map(f: A =&gt; B)(xs: List[A]): List[B]
</span><span id="22" class=""><span class="hideable"></span>def map[A, B](f: Fun[A, B])(xs: List[A]): f.Eff ?=&gt; List[B] =
</span><span id="23" class=""><span class="hideable"></span>  xs.map(f.apply)
</span><span id="24" class=""><span class="hideable"></span>
</span><span id="25" class=""><span class="hideable"></span>// def mapFn[A, B]: (A =&gt; B) -&gt; List[A] -&gt; List[B]
</span><span id="26" class=""><span class="hideable"></span>def mapFn[A, B]: (f: Fun[A, B]) =&gt; List[A] =&gt; f.Eff ?=&gt; List[B] =
</span><span id="27" class=""><span class="hideable"></span>  f =&gt; xs =&gt; map(f)(xs)
</span><span id="28" class=""><span class="hideable"></span>
</span><span id="29" class=""><span class="hideable"></span>// def compose(f: A =&gt; B)(g: B =&gt; C)(x: A): C
</span><span id="30" class=""><span class="hideable"></span>def compose[A, B, C](f: Fun[A, B])(g: Fun[B, C])(x: A):
</span><span id="31" class=""><span class="hideable"></span>  f.Eff ?=&gt; g.Eff ?=&gt; C =
</span><span id="32" class=""><span class="hideable"></span>  g(f(x))
</span><span id="33" class=""><span class="hideable"></span>
</span><span id="34" class=""><span class="hideable"></span>// def composeFn: (A =&gt; B) -&gt; (B =&gt; C) -&gt; A -&gt; C
</span><span id="35" class=""><span class="hideable"></span>def composeFn[A, B, C]:
</span><span id="36" class=""><span class="hideable"></span>  (f: Fun[A, B]) =&gt; (g: Fun[B, C]) =&gt; A =&gt; f.Eff ?=&gt; g.Eff ?=&gt; C =
</span><span id="37" class=""><span class="hideable"></span>  f =&gt; g =&gt; x =&gt; compose(f)(g)(x)
</span><span id="38" class=""><span class="hideable"></span>
</span><span id="39" class=""><span class="hideable"></span>@main def test =
</span><span id="40" class=""><span class="hideable"></span>  val i2s = new I2S
</span><span id="41" class=""><span class="hideable"></span>  val s2i = new S2I
</span><span id="42" class=""><span class="hideable"></span>
</span><span id="43" class=""><span class="hideable"></span>  assert(mapFn(i2s)(List(1, 2, 3)).mkString == &quot;123&quot;)
</span><span id="44" class=""><span class="hideable"></span>  assert(composeFn(i2s)(s2i)(22) == 2)
</span></code></pre></div>

<h3 id="type-checking">Type Checking</h3>

<p>After desugaring no additional typing rules are required for dependent function types.</p>

				</div>

				<div class="content-contributors">
    <h3>Contributors to this page:</h3>
    <div id="contributors" class="contributors-container"></div>
</div>

			</div>
		</div>

		<!-- TOC -->
		<div class="content-nav">
	<div class="inner-box sidebar-toc-wrapper" style="">
		<h5 class="contents">Contents</h5>
		<div class="inner-toc" id="sidebar-toc">
      <div id="toc"></div>
      
		</div>
		<hr>
		<div class="help-us"><a href="https://github.com/scala/docs.scala-lang/blob/main/_scala3-reference/new-types/dependent-function-types-spec.md"><i class="fa fa-pencil" aria-hidden="true"></i> Problem with this page?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please help us fix it!</a></div>
	</div>
</div>

	</div>
</section>


</main>

<footer id="site-footer">
    <div class="wrap">
      <div class="site-footer-top">
        
          <ul class="documentation">
            <li><h3>Documentation</h3></li>
            
              <li><a href="/getting-started.html">Getting Started</a></li>
            
              <li><a href="https://www.scala-lang.org/api/current/index.html">API</a></li>
            
              <li><a href="/overviews">Overviews/Guides</a></li>
            
              <li><a href="http://scala-lang.org/files/archive/spec/2.13/">Language Specification</a></li>
            
          </ul>
        
          <ul class="download">
            <li><h3>Download</h3></li>
            
              <li><a href="http://scala-lang.org/download/">Current Version</a></li>
            
              <li><a href="http://scala-lang.org/download/all.html">All versions</a></li>
            
          </ul>
        
          <ul class="community">
            <li><h3>Community</h3></li>
            
              <li><a href="http://scala-lang.org/community/">Community</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#mailing-lists">Mailing Lists</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#chat-rooms">Chat Rooms & More</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#community-libraries-and-tools">Libraries and Tools</a></li>
            
              <li><a href="http://scala.epfl.ch/">The Scala Center</a></li>
            
          </ul>
        
          <ul class="contribute">
            <li><h3>Contribute</h3></li>
            
              <li><a href="http://scala-lang.org/contribute/">How to help</a></li>
            
              <li><a href="http://scala-lang.org/contribute/bug-reporting-guide.html">Report an Issue</a></li>
            
          </ul>
        
          <ul class="scala">
            <li><h3>Scala</h3></li>
            
              <li><a href="http://scala-lang.org/blog/">Blog</a></li>
            
              <li><a href="http://scala-lang.org/conduct/">Code of Conduct</a></li>
            
              <li><a href="http://scala-lang.org/license/">License</a></li>
            
          </ul>
        
          <ul class="social">
            <li><h3>Social</h3></li>
            
              <li><a href="https://github.com/scala/scala">GitHub</a></li>
            
              <li><a href="https://twitter.com/scala_lang">Twitter</a></li>
            
          </ul>
        
      </div>
      <div class="site-footer-bottom">
        <p></p>
        <img src="/resources/img/frontpage/scala-logo-white.png" alt="">
      </div>
    </div>
    <a class="back-to-top in" href="#" id="scroll-to-top-btn">
      <i class="fa fa-angle-up"></i>
    </a>
</footer>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
<script>(window.jQuery) || document.write('<script src="/scripts/jquery-3.1.1.min.js"><\/script>');</script>
<script src="/resources/js/vendor/jquery.autocomplete.js" type="text/javascript"></script>

<!-- moment js -->
<script src="/resources/js/vendor/moment.min.js" type="text/javascript"></script>

<!-- tweet feed -->
<script src="/resources/js/tweetMachine-update.js" type="text/javascript"></script>

<!-- prettify js -->
<script src="/resources/js/vendor/prettify/prettify.js" type="text/javascript"></script>
<script src="/resources/js/vendor/prettify/lang-scala.js" type="text/javascript"></script>

<!-- unslider js -->
<script src="/resources/js/vendor/unslider.js" type="text/javascript"></script>

<!-- Highlight -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/languages/scala.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/languages/java.min.js" type="text/javascript"></script>

<!-- CodeMirror -->
<script src="/resources/js/vendor/codemirror/codemirror.js" type="text/javascript"></script>
<script src="/resources/js/vendor/codemirror/clike.js" type="text/javascript"></script>

<!-- TOC -->
<script src="/resources/js/vendor/toc.js" type="text/javascript"></script>

<!-- Blog search -->
<script src="/resources/js/vendor/jekyll.search.min.js" type="text/javascript"></script>

<!-- Custom JavaScript -->
<script src="/resources/js/functions.js" type="text/javascript"></script>



<!-- Alogolia search for doc -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
if ($("#doc-search-bar").length) {
  docsearch({
    apiKey: 'fbc439670f5d4e3730cdcb715c359391',
    indexName: 'scala-lang',
    inputSelector: '#doc-search-bar',
    algoliaOptions: { 'facetFilters': ["language:en"] },
    debug: false // Set debug to true if you want to inspect the dropdown
  });
}
</script>
</body>

</html>


<script src="/scripts/scaladoc-scalajs.js" type="text/javascript"></script>
<link rel="stylesheet" href="/resources/css/colors.css" type="text/css" />
<link rel="stylesheet" href="/resources/css/code-snippets.css" type="text/css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css">

