<!DOCTYPE html>

<html>

  <head>
    <title>
      JavaプログラマーのためのScalaチュートリアル | 
      
      Scala Documentation
    </title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:site_name" content="Scala Documentation"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://0.0.0.0:4000/ja/tutorials/scala-for-java-programmers.html"/>
    <meta property="og:image" content="http://0.0.0.0:4000/resources/img/scala-spiral-3d-2-toned-down.png"/>
    <meta property="og:title" content="JavaプログラマーのためのScalaチュートリアル"/>
    

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@scala_lang"/>
    <meta name="twitter:creator" content="@scala_lang"/>
    <meta name="twitter:title" content="JavaプログラマーのためのScalaチュートリアル"/>
    

    <link rel="icon" type="image/png" href="/resources/favicon.ico">
    <link rel="shortcut icon" type="image/png" href="/resources/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/resources/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/favicon-16x16.png">
    <link rel="manifest" href="/resources/site.webmanifest">
    <link rel="mask-icon" href="/resources/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#15a9ce">
    <meta name="theme-color" content="#ffffff">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!-- Custom stylesheet -->
    <link href="/resources/css/unslider-dots.css" rel="stylesheet" type="text/css">
    <link href="/resources/css/unslider.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/resources/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/monospace.css" type="text/css" />

    <!-- Atom feeds -->
    <link rel="alternate" type="application/atom+xml" title="News Feed" href="http://scala-lang.org/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Feed" href="http://scala-lang.org/feed/blog.xml" />

    <!-- Algolia stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head>
  <body>





<div class="navigation-fade-screen"></div>



<header id="site-header">
  <div class="wrap">
    <nav class="navigation" role="menu">
      <a href="http://scala-lang.org" class="navigation-bdand">
        <img src="/resources/img/frontpage/scala-logo-white@2x.png" alt="">
      </a>
      <div class="navigation-panel-button">
        <i class="fa fa-bars"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              <a href="/" class="active">Documentation</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/download/" >Download</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/community/" >Community</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://index.scala-lang.org" >Libraries</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/contribute/" >Contribute</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/blog/" >Blog</a>
            </li>
        
      </ul>
    </nav>
  </div>
</header>



<header id="doc-header">

  <div class="wrap" style="padding: 0px;">
    <nav class="doc-navigation" role="menu">
      
      <div class="navigation-bdand">
      <a href="/">
        <img src="/resources/img/documentation-logo@2x.png" alt="docs">
      </a>
      <span class="doc-language-version">
        — Scala  2 
      </span>
      </div>
      <div class="navigation-ellipsis">
        <i class="fa fa-ellipsis-v"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              
              
              <a href="#" id="api" >API</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    
                    
                    <a href="https://www.scala-lang.org/api/current/">Current</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="/api/all.html">All Versions</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="#" id="learn" >Learn</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    
                    
                    <a href="/ja/getting-started/index.html">Getting Started</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="/ja/tour/tour-of-scala.html">Tour of Scala</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="/overviews/scala-book/introduction.html">Scala Book</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="/ja/tutorials/scala-for-java-programmers.html">Scala for Java Programmers</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="/learn.html">Online Resources</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="#" id="reference" >Reference</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    
                    
                    <a href="/ja/overviews/index.html">Guides & Overviews</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="/books.html">Books</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="/tutorials/FAQ/index.html">Scala FAQ</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="http://scala-lang.org/files/archive/spec/2.13/">Language Spec</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="/style/index.html" id="style guide" >Style Guide</a>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="/ja/cheatsheets/index.html" id="cheatsheet" >Cheatsheet</a>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="/glossary/index.html" id="glossary" >Glossary</a>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="/sips/index.html" id="sips" >SIPs</a>
                
            </li>
        
      </ul>
    </nav>
    <nav class="doc-navigation-submenus">
      
        
          <ul class="navigation-submenu" id="api" style="display: none;">
            
              <li>
                <a href="https://www.scala-lang.org/api/current/">Current</a>
              </li>
            
              <li>
                <a href="/api/all.html">All Versions</a>
              </li>
            
          </ul>
        
      
        
          <ul class="navigation-submenu" id="learn" style="display: none;">
            
              <li>
                <a href="/getting-started/index.html">Getting Started</a>
              </li>
            
              <li>
                <a href="/tour/tour-of-scala.html">Tour of Scala</a>
              </li>
            
              <li>
                <a href="/overviews/scala-book/introduction.html">Scala Book</a>
              </li>
            
              <li>
                <a href="/tutorials/scala-for-java-programmers.html">Scala for Java Programmers</a>
              </li>
            
              <li>
                <a href="/learn.html">Online Resources</a>
              </li>
            
          </ul>
        
      
        
          <ul class="navigation-submenu" id="reference" style="display: none;">
            
              <li>
                <a href="/overviews/index.html">Guides & Overviews</a>
              </li>
            
              <li>
                <a href="/books.html">Books</a>
              </li>
            
              <li>
                <a href="/tutorials/FAQ/index.html">Scala FAQ</a>
              </li>
            
              <li>
                <a href="http://scala-lang.org/files/archive/spec/2.13/">Language Spec</a>
              </li>
            
          </ul>
        
      
        
      
        
      
        
      
        
      
      <ul class="navigation-submenu ellipsis-menu" style="display: none;">
        
          
        
          
        
          
        
          
            <li><a href="/style/index.html">Style Guide</a></li>
          
        
          
            <li><a href="/cheatsheets/index.html">Cheatsheet</a></li>
          
        
          
            <li><a href="/glossary/index.html">Glossary</a></li>
          
        
          
            <li><a href="/sips/index.html">SIPs</a></li>
          
        
      </ul>
    </nav>
  </div>
</header>


<main id="inner-main">
  <!-- Title -->
  <section class="title-page">
    <div class="wrap">
      <div class="content-title-documentation">
        

        <div class="titles">
          
            <div class="supertitle">&nbsp;</div>
          
          <h1>JavaプログラマーのためのScalaチュートリアル</h1>
        </div>
        <div class="language-dropdown">
          <div id="dd" class="wrapper-dropdown" tabindex="1">
            <span>Language</span>
              <ul class="dropdown"></ul>
          </div>
      </div>
    </div>
  </section>

  
  <section class="content">
	<div class="wrap">
		<div class="content-primary documentation">
			<div class="inner-box">
				<div class="toc-context">
					<p>原文 Michel Schinz and Philipp Haller<br />
翻訳 TATSUNO Yasuhiro</p>

<h2 id="はじめに">はじめに</h2>

<p>この文書は、Scala 言語とコンパイラを手短に紹介します。
ある程度プログラミング経験を持ち、Scala で何ができるかについて概要を知りたい方向けです。
オブジェクト指向プログラミング、とりわけ Java についての基本的な知識を前提とします。</p>

<h2 id="最初の例">最初の例</h2>

<p>最初の例として、基本的な <strong>Hello World</strong> プログラムを用います。
興味をそそられるものではありませんが、言語についてほとんど知らなくてもScala ツールの使い方を実演しやすいです。
こんな感じです:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>object HelloWorld {
  def main(args: Array[String]): Unit = {
    println("Hello, world!")
  }
}
</code></pre></div></div>

<p>このプログラムの構造は、Java プログラマにはなじみ深いはずです。
<code class="language-plaintext highlighter-rouge">main</code> と呼ばれるメソッドがあり、それはパラメータとしてコマンドライン引数（文字列の配列）を受け取ります。
このメソッドの本体は、事前に定義されたメソッド <code class="language-plaintext highlighter-rouge">println</code> に友好的な挨拶を引数にして、1回だけ呼び出しています。
<code class="language-plaintext highlighter-rouge">main</code> メソッドは値を返しません（手続きメソッド）。
そのため、その戻り値の型は <code class="language-plaintext highlighter-rouge">Unit</code> として宣言されます。</p>

<p>Java プログラマにあまりなじみがないのは、<code class="language-plaintext highlighter-rouge">main</code> メソッドを含む <code class="language-plaintext highlighter-rouge">object</code> という宣言です。
Scala はそのような宣言によって、一般に<strong>シングルトンオブジェクト</strong>として知られる、インスタンスを１つだけ有するクラスを取り入れています。
そのため先の宣言は、<code class="language-plaintext highlighter-rouge">HelloWorld</code> という名前のクラスと、そのクラスのただ1つのインスタンス（これまた <code class="language-plaintext highlighter-rouge">HelloWorld</code> という名前）両方を宣言しています。
このインスタンスは必要に応じ、初めて使われるときに生成されます。</p>

<p>鋭い読者なら <code class="language-plaintext highlighter-rouge">main</code> メソッドが <code class="language-plaintext highlighter-rouge">static</code> として宣言されていないことに気づいたかもしれません。
これは Scala には static メンバー（メソッドまたはフィールド）が存在しないからです。
static メンバーを定義するよりも、Scala プログラマーはシングルトンオブジェクトにそれらメンバーを宣言します。</p>

<h3 id="例をコンパイルする">例をコンパイルする</h3>

<p>先の例をコンパイルするために、Scala コンパイラー <code class="language-plaintext highlighter-rouge">scalac</code> を使います。
<code class="language-plaintext highlighter-rouge">scalac</code> はほとんどのコンパイラーと同様に動きます。
ソースファイルといくつかのオプションを引数として受け取り、１つか複数のオブジェクトファイルを作ります。
作られるオブジェクトファイルは、標準的な Java クラスファイルです。</p>

<p>上記のプログラムを <code class="language-plaintext highlighter-rouge">HelloWorld.scala</code> というファイルに保存したら、次のコマンドを発行することでコンパイルできます
（大なり記号 <code class="language-plaintext highlighter-rouge">&gt;</code> はシェルプロンプトを表しており、入力しないでください）。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; scalac HelloWorld.scala
</code></pre></div></div>

<p>これにより、カレントディレクトリに数個のクラスファイルが生成されます。
そのひとつは <code class="language-plaintext highlighter-rouge">HelloWorld.class</code> というもので、<code class="language-plaintext highlighter-rouge">scala</code> コマンドを使って直接実行可能（次の章で説明）なクラスを含んでいます。</p>

<h3 id="例を実行する">例を実行する</h3>

<p>一度コンパイルされると、Scala プログラムは <code class="language-plaintext highlighter-rouge">scala</code> コマンドを使って実行できます。
その使い方は、Java プログラムの実行に使われる <code class="language-plaintext highlighter-rouge">java</code> コマンドとよく似ており、同じオプションを受け入れます。
上の例は以下のコマンドを使って実行でき、期待される結果を生成します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; scala -classpath . HelloWorld

Hello, world!
</code></pre></div></div>

<h2 id="java-とのインタラクション">Java とのインタラクション</h2>

<p>Scala の強みの１つは、Java コードと相互作用するのがとても簡単なことです。
<code class="language-plaintext highlighter-rouge">java.lang</code> パッケージのすべてのクラスは初期設定でインポートされています。
他のクラスは明示的にインポートされる必要があります。</p>

<p>これを実演する例を見てみましょう。
現在の日付を取得し、特定の国たとえばフランスの慣例に従って書式設定したいとします
（他の地域、例えばスイスのフランス語を話す範囲も同じ慣例を使います）。</p>

<p>Java のクラスライブラリは、強力なユーティリティクラス、例えば <code class="language-plaintext highlighter-rouge">Date</code> や <code class="language-plaintext highlighter-rouge">DateFormat</code> を定義しています.
Scala は Java とシームレスに相互運用できるので、Scala クラスライブラリに同等のクラスを実装する必要はありません。
対応する Java パッケージのクラスをただインポートするだけです。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import java.util.{Date, Locale}
import java.text.DateFormat._

object FrenchDate {
  def main(args: Array[String]): Unit = {
    val now = new Date
    val df = getDateInstance(LONG, Locale.FRANCE)
    println(df format now)
  }
}
</code></pre></div></div>

<p>Scala のインポート文は Java と同等のものととてもよく似ていますが、ずっと強力です。
1行目にあるように、波括弧で囲むことで同じパッケージから複数のクラスをインポートできます。
また別の違いとして、パッケージやクラスのすべての名前をインポートするときは、アスタリスク <code class="language-plaintext highlighter-rouge">*</code> の代わりにアンダースコア文字 <code class="language-plaintext highlighter-rouge">_</code> を使います。
というのもアスタリスクは、あとで見るように Scala の識別子（例えばメソッド名）として有効だからです。</p>

<p>それゆえ2行目のインポート文は、<code class="language-plaintext highlighter-rouge">DateFormat</code> クラスのすべてのメンバーをインポートします。
これによって static メソッド <code class="language-plaintext highlighter-rouge">getDateInstance</code> や static フィールド <code class="language-plaintext highlighter-rouge">LONG</code> が直接利用可能になります。</p>

<p><code class="language-plaintext highlighter-rouge">main</code> メソッドの中では、まず Java の <code class="language-plaintext highlighter-rouge">Date</code> クラスのインスタンスを作成します。
このインスタンスはデフォルトで現在の日時を含んでいます。
次に、先ほどインポートした static の <code class="language-plaintext highlighter-rouge">getDateInstance</code> メソッドを使って日付の書式を定義します。
最後に、ローカライズされた <code class="language-plaintext highlighter-rouge">DateFormat</code> インスタンスによって書式設定された現在の日付を表示します。
この最後の行は Scala の構文の興味深い特性を表しています。
1引数メソッドには、中置（infix）記法を用いることができます。
つまり、式</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>df format now
</code></pre></div></div>

<p>は、次の式</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>df.format(now)
</code></pre></div></div>

<p>よりも少しだけ冗長でなくなった書き方です。</p>

<p>これは大したことのない構文上の詳細に思えるかもしれませんが、重要な影響をもたらします。
その１つについては次の節で詳しく取り上げます。</p>

<p>Java との相互作用についての本節を終える前に、Scala では Java クラスを継承したり、Java インターフェースを実装できることも記しておきます。</p>

<h2 id="すべてがオブジェクト">すべてがオブジェクト</h2>

<p>Scala は、数値や関数を含む<strong>あらゆるもの</strong>がオブジェクトであるという意味で、純粋なオブジェクト指向言語です。
この点において、プリミティブ型（例えば <code class="language-plaintext highlighter-rouge">boolean</code> や <code class="language-plaintext highlighter-rouge">int</code>）を参照型と区別する Java とは異なります。</p>

<h3 id="数値はオブジェクト">数値はオブジェクト</h3>

<p>数値もまたオブジェクトなのでメソッドを持っています。
実のところ、以下のような数値計算</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1 + 2 * 3 / x
</code></pre></div></div>

<p>は、メソッド呼び出しのみから成り立っています。
というのもこの式は、前節で見たように以下の式に相当するからです。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.+(2.*(3)./(x))
</code></pre></div></div>

<p>これは <code class="language-plaintext highlighter-rouge">+</code> や <code class="language-plaintext highlighter-rouge">*</code> などが Scala では識別子として有効であることを意味します。</p>

<h3 id="関数はオブジェクト">関数はオブジェクト</h3>

<p>Scala では関数もオブジェクトです。
それゆえ関数を引数として渡すこと、関数を変数に格納すること、他の関数から関数を返すことができます。
関数を値として操作できるこの能力は、<strong>関数プログラミング</strong>と呼ばれるとても興味深いプログラミングパラダイムにとって不可欠なものの1つです。</p>

<p>関数を値として使えることが便利であるとてもシンプルな例として、タイマー関数を考えてみましょう。
それは毎秒何らかの動作を実行するためのものです。
実行したい動作をどうやって渡せるでしょうか？
当然、関数としてです。
関数渡しのとてもシンプルな例は、多くのプログラマーになじみ深いはずです。
ユーザーインターフェースのコードで、何かイベントが起きたら呼ばれるコールバック関数を登録するのに、よく用いられています。</p>

<p>次のプログラムでは、<code class="language-plaintext highlighter-rouge">oncePerSecond</code> というタイマー関数がコールバック関数を引数として受取ります。
この関数の型は <code class="language-plaintext highlighter-rouge">() =&gt; Unit</code> 、つまり、引数を受け取らず何も返さない（<code class="language-plaintext highlighter-rouge">Unit</code> 型は C/C++/Java の <code class="language-plaintext highlighter-rouge">void</code> と同様）すべての関数を表す型です。
このプログラムの <code class="language-plaintext highlighter-rouge">main</code> 関数は、ターミナルに文を印字するコールバックを与えてタイマー関数を呼ぶだけのものです。
つまりこのプログラムは延々と <code class="language-plaintext highlighter-rouge">"time flies like an array"</code> という文を毎秒印字します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>object Timer {
  def oncePerSecond(callback: () =&gt; Unit): Unit = {
    while (true) { callback(); Thread sleep 1000 }
  }
  def timeFlies(): Unit = {
    println("time flies like an arrow...")
  }
  def main(args: Array[String]): Unit = {
    oncePerSecond(timeFlies)
  }
}
</code></pre></div></div>

<p>文字列を印字するために使われているのが事前定義された <code class="language-plaintext highlighter-rouge">println</code> メソッドで、<code class="language-plaintext highlighter-rouge">System.out</code> の <code class="language-plaintext highlighter-rouge">println</code> ではないことに注意してください。</p>

<h4 id="匿名関数">匿名関数</h4>

<p>このプログラムは理解しやすいですが、もう少し洗練できます。
まず第一に、関数 <code class="language-plaintext highlighter-rouge">timeFlies</code> はあとで <code class="language-plaintext highlighter-rouge">oncePerSecond</code> 関数に渡すためだけに定義されていることに気づきます。
たった一度しか使われない関数に名前をつけるのは不必要に思えるので、要は <code class="language-plaintext highlighter-rouge">oncePerSecoond</code> に渡す関数を作れさえすればよいでしょう。
Scala では、まさにそんな名前を持たない関数、<strong>匿名関数</strong>を使えます。
<code class="language-plaintext highlighter-rouge">timeFlies</code> の代わりに匿名関数を使って改正したタイマープログラムはこんな風になります。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>object TimerAnonymous {
  def oncePerSecond(callback: () =&gt; Unit): Unit = {
    while (true) { callback(); Thread sleep 1000 }
  }
  def main(args: Array[String]): Unit = {
    oncePerSecond(() =&gt;
      println("time flies like an arrow..."))
  }
}
</code></pre></div></div>

<p>この例で匿名関数が登場することは、関数の引数リストと本体を分ける右矢印 <code class="language-plaintext highlighter-rouge">=&gt;</code> から分かります。
この例では、引数リストは空で、矢印の左にある中身のない括弧によって表されています。
関数の本体は上記の <code class="language-plaintext highlighter-rouge">timeFlies</code> のものと同じです。</p>

<h2 id="クラス">クラス</h2>

<p>上で見てきたように、Scala はクラスという概念を持っているように、オブジェクト指向言語です
（正確には、クラスという概念のないオブジェクト指向言語もありますが、Scala はそうではありません）。
Scala におけるクラスは Java の構文に近い構文を使って宣言されます。
1つ重要な違いは、Scala におけるクラスはパラメータを持つことができることです。
これは以下の素数の定義に示されています。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Complex(real: Double, imaginary: Double) {
  def re() = real
  def im() = imaginary
}
</code></pre></div></div>

<p>この <code class="language-plaintext highlighter-rouge">Complex</code> クラスは2つの引数、素数の実部と虚部を受け取ります。
これら引数は <code class="language-plaintext highlighter-rouge">Complex</code> クラスのインスタンスを作成するときに必ず、<code class="language-plaintext highlighter-rouge">new　Complex(1.5, 2.3)</code> というように渡さなければなりません
このクラスは2つのメソッド <code class="language-plaintext highlighter-rouge">re</code> と <code class="language-plaintext highlighter-rouge">im</code> を持ち、これら2つの部分へアクセスできるようにします。</p>

<p>これら2つのメソッドの戻り値の型が明示されていないことに注意してください。
コンパイラによって自動で推論されます。
コンパイラはこれらメソッドの右側を調べ、どちらも <code class="language-plaintext highlighter-rouge">Double</code> 型の値を返すと推論します。</p>

<p>コンパイラはここでのように型をいつでも推論できるわけではありません。
残念ながらいつできて、いつできないかを正確に分かる簡単な規則はありません。
実際には、コンパイラは明示的に与えられていない型を推論できないときに訴えてくるので、あまり問題になりません。
簡単な規則として、初心者 Scala プログラマーは、文脈から推定しやすそうな型宣言を省略してみてコンパイラーが認めてくれるか試してみてください。
しばらくすれば、いつ型を省略するか、いつ明示的に指定するか、良い感触をつかむはずです。</p>

<h3 id="引数なしのメソッド">引数なしのメソッド</h3>

<p><code class="language-plaintext highlighter-rouge">re</code> と <code class="language-plaintext highlighter-rouge">im</code> メソッドにはちょっとした問題があります。
次の例が示すように、それらを呼ぶには名前のあとに中身のない括弧を置かねばなりません。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>object ComplexNumbers {
  def main(args: Array[String]): Unit = {
    val c = new Complex(1.2, 3.4)
    println("imaginary part: " + c.im())
  }
}
</code></pre></div></div>

<p>実部と虚部があたかもフィールドのようにアクセスできたらすばらしいですね。
Scala では完全にこれが可能で、<strong>引数なしのメソッド</strong>としてそれらを定義するだけです。
そのようなメソッドは、名前のあとに括弧を持たない（定義場所でも使用場所でも）という点で、0引数のメソッドと区別されます。
<code class="language-plaintext highlighter-rouge">Complex</code> クラスは次のように書き直せます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Complex(real: Double, imaginary: Double) {
  def re = real
  def im = imaginary
}
</code></pre></div></div>

<h3 id="継承とオーバーライド">継承とオーバーライド</h3>

<p>Scala におけるすべてのクラスはスーパークラスを継承します。
前節の <code class="language-plaintext highlighter-rouge">Complex</code> の例のように、スーパークラスが指定されていないときは、暗黙的に <code class="language-plaintext highlighter-rouge">scala.AnyRef</code> が使われます。</p>

<p>Scalaでは、スーパークラスから継承されたメソッドをオーバーライドできます。
予想外のオーバーライドを防ぐため、メソッドがオーバーライドしていることを<code class="language-plaintext highlighter-rouge">override</code> 修飾子を使って明に指定することが必須です。
その例として、<code class="language-plaintext highlighter-rouge">Object</code> から継承した <code class="language-plaintext highlighter-rouge">toString</code> メソッドの再定義を <code class="language-plaintext highlighter-rouge">Complex</code> クラスに追加してみます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Complex(real: Double, imaginary: Double) {
  def re = real
  def im = imaginary
  override def toString() =
    "" + re + (if (im &gt;= 0) "+" else "") + im + "i"
}
</code></pre></div></div>

<p>オーバーライドされた <code class="language-plaintext highlighter-rouge">toString</code> は以下のように呼び出せます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>object ComplexNumbers {
  def main(args: Array[String]): Unit = {
    val c = new Complex(1.2, 3.4)
    println("Overridden toString(): " + c.toString)
  }
}
</code></pre></div></div>

<h2 id="ケースクラスとパターンマッチ">ケースクラスとパターンマッチ</h2>

<p>プログラムによく現れる一種のデータ構造は、木（訳注：ツリー）です。
例えば、インタープリターやコンパイラーは通例、プログラムを木として内部的に表現します。
XMLドキュメントもツリーです。
何種類ものコンテナーが木、例えば赤黒木をベースとしています。</p>

<p>そのような木が Scala ではどのように表現され、操作されるかを、小さい計算機プログラムを通じて見ていきます。
このプログラムの目的は、足し算と整数の定数と変数からなる、とても単純な演算式の操作です。
<code class="language-plaintext highlighter-rouge">1+2</code> や <code class="language-plaintext highlighter-rouge">(x+x)+(7+y)</code> は、そのような式の2つの例です。</p>

<p>はじめにそのような式の表現を決めなければいけません。
もっとも自然なのは木構造で、ノードは操作（ここでは加算）、葉は値（ここでは定数か変数）です。</p>

<p>Java では、そのような木構造はそのための抽象スーパークラス、ノードと葉それぞれの具象クラスで表現されるでしょう。
関数プログラミング言語では、そのような目的には代数的データ型を用います。
Scala は、それら2つの中間のような<strong>ケースクラス</strong>という概念を提供します。
ここでは、ケースクラスが例題のツリー型を定義するためにどう使えるかを示しています。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>abstract class Tree
case class Sum(l: Tree, r: Tree) extends Tree
case class Var(n: String) extends Tree
case class Const(v: Int) extends Tree
</code></pre></div></div>

<p>クラス <code class="language-plaintext highlighter-rouge">Sum</code>、<code class="language-plaintext highlighter-rouge">Var</code>、<code class="language-plaintext highlighter-rouge">Const</code> がケースクラスとして宣言されているということは、それらが通常のクラスといくつかの点で違うことを意味します。</p>

<ul>
  <li>クラスインスタンスを作るにあたり <code class="language-plaintext highlighter-rouge">new</code> キーワードは必須ではありません
（例えば、<code class="language-plaintext highlighter-rouge">new Const(5)</code> の代わりに <code class="language-plaintext highlighter-rouge">Const(5)</code> と書けます)</li>
  <li>コンストラクターパラメーターに対するゲッター関数は自動で定義されます
（つまり、クラス <code class="language-plaintext highlighter-rouge">Const</code> のインスタンス <code class="language-plaintext highlighter-rouge">c</code> のコンストラクターパラメーター <code class="language-plaintext highlighter-rouge">v</code> の値を <code class="language-plaintext highlighter-rouge">c.v</code> と書くだけで取得できます）</li>
  <li>メソッド <code class="language-plaintext highlighter-rouge">equals</code> と <code class="language-plaintext highlighter-rouge">hashCode</code> のデフォルト定義が提供されます。
それらはインスタンスの同一性ではなく<strong>構造</strong>をもとに動きます。</li>
  <li>メソッド <code class="language-plaintext highlighter-rouge">toString</code> のデフォルト定義が提供されます。
「ソースの外」で値を印字します（つまり、式 <code class="language-plaintext highlighter-rouge">x+1</code> のツリーは <code class="language-plaintext highlighter-rouge">Sum(Var(x),Const(1))</code> を印字します)</li>
  <li>これらクラスのインスタンスは、以下で見るようにパターンマッチを使って分解できます。</li>
</ul>

<p>算術式を表すデータ型を定義できたので、それらを操作する演算の定義を始められます。
ある<strong>環境</strong>における式を評価する関数から始めます。
環境の目的は、変数に値を与えるためです。
例えば、値 <code class="language-plaintext highlighter-rouge">5</code> が変数 <code class="language-plaintext highlighter-rouge">x</code> に結び付けられた環境を<code class="language-plaintext highlighter-rouge">{ x -&gt; 5 }</code> と表すとして、そこでは式 <code class="language-plaintext highlighter-rouge">x+1</code> は <code class="language-plaintext highlighter-rouge">6</code> という結果を出します。　</p>

<p>そのため環境を表す方法を見つけなければいけません。
もちろん、ハッシュテーブルのような連想データ構造を使うことができますが、関数を直接使うこともできます！
環境とは実のところ値を（変数の）名前に結びつける関数に過ぎません。
上記の環境 <code class="language-plaintext highlighter-rouge">{ x -&gt; 5 }</code> は Scala ではシンプルに書けます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ case "x" =&gt; 5 }
</code></pre></div></div>

<p>この記法は、引数として文字列 <code class="language-plaintext highlighter-rouge">"x"</code> を受けとったら整数 <code class="language-plaintext highlighter-rouge">5</code> を返し、それ以外のときは例外とともに失敗する関数を定義します。</p>

<p>評価関数を書く前に、環境の型に名前を付けましょう。
もちろん環境には型 <code class="language-plaintext highlighter-rouge">String =&gt; Int</code> をいつでも使えますが、この型に名前を付けておけばプログラムが単純になり、将来変更しやすくなります。
これは Scala では次の記法で達成できます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type Environment = String =&gt; Int
</code></pre></div></div>

<p>以降、型 <code class="language-plaintext highlighter-rouge">Environment</code> は <code class="language-plaintext highlighter-rouge">String</code> から <code class="language-plaintext highlighter-rouge">Int</code> への関数の型の別名（訳注：エイリアス）として使えます。</p>

<p>これで評価関数の定義を与えることができます。
概念上はとても簡単です。
2式の和の値は、単にそれら式の値の和です。
変数の値は環境から直接得られます。
そして定数の値はそれ自身です。
Scala でこれを表すと、これ以上難しくならないでしょう。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def eval(t: Tree, env: Environment): Int = t match {
  case Sum(l, r) =&gt; eval(l, env) + eval(r, env)
  case Var(n)    =&gt; env(n)
  case Const(v)  =&gt; v
}
</code></pre></div></div>

<p>この評価関数は、木 <code class="language-plaintext highlighter-rouge">t</code> に<strong>パターンマッチ</strong>を実行することで動作します。
直感的に、上記定義の意味は明らかです。</p>

<ol>
  <li>まず <code class="language-plaintext highlighter-rouge">t</code> が <code class="language-plaintext highlighter-rouge">Sum</code> であるかをチェックします。
もしそうであれば、左部分木を変数 <code class="language-plaintext highlighter-rouge">l</code> 、右部分木を変数 <code class="language-plaintext highlighter-rouge">r</code> に束縛します。
それから矢印に続く式の評価を進めます。
この式では矢印の左側に現れるパターンに束縛された変数 <code class="language-plaintext highlighter-rouge">l</code> と <code class="language-plaintext highlighter-rouge">r</code> を使うことができ、実際にそうしています。</li>
  <li>もし最初のチェックが成功しなければ、つまり木が <code class="language-plaintext highlighter-rouge">Sum</code> でなければ、続けて <code class="language-plaintext highlighter-rouge">t</code> が <code class="language-plaintext highlighter-rouge">Var</code> であるかチェックします。
もしそうであれば、<code class="language-plaintext highlighter-rouge">Var</code> ノードに含まれる名前を変数 <code class="language-plaintext highlighter-rouge">n</code> に束縛し、右側の式に進みます。</li>
  <li>もし2つ目のチェックが失敗すれば、つまり <code class="language-plaintext highlighter-rouge">t</code> が <code class="language-plaintext highlighter-rouge">Sum</code> でも <code class="language-plaintext highlighter-rouge">Var</code> でもなければ、<code class="language-plaintext highlighter-rouge">Const</code> であるかどうかチェックします。
もしそうであれば、<code class="language-plaintext highlighter-rouge">Const</code> ノードに含まれる値を変数 <code class="language-plaintext highlighter-rouge">v</code> に束縛し、右側の式に進みます。</li>
  <li>最後に、すべてのチェックが失敗すれば、パターンマッチ式の失敗を知らせるために例外が発生します。
これは <code class="language-plaintext highlighter-rouge">Tree</code> のサブクラスが他にも宣言されているときにのみ起こりえます。</li>
</ol>

<p>パターンマッチの基本的なアイデアを見てきました。
それは連続するパターンを値にマッチさせてみて、パターンがマッチすると値を抽出してその各部に名前をつけて、通常それら名前のついた部分を活用する何らかのコードを最終的に評価するものです。</p>

<p>経験豊富なプログラマであれば、<code class="language-plaintext highlighter-rouge">Tree</code> クラスやサブクラスの<strong>メソッド</strong>として <code class="language-plaintext highlighter-rouge">eval</code> を定義しなかったことを不思議がっているかもしれません。
Scala は普通のクラスと同様にケースクラスにメソッド定義を許しているので、実際にはそうすることもできました。
それゆえ、パターンマッチを使うかメソッドを使うかを決めるのは好みの問題ではありますが、拡張性について重要な示唆があります。</p>

<ul>
  <li>メソッドを使うときは、<code class="language-plaintext highlighter-rouge">Tree</code> サブクラスを定義するだけでできるので、新種のノードを足すのは簡単です。
一方で、木を操作する新しい処理を追加するのは、<code class="language-plaintext highlighter-rouge">Tree</code> の全サブクラスの変更が必要になってしまうので、面倒です。</li>
  <li>パターンマッチを使うときは、状況が逆になります。
新種のノード追加は、木に対するパターンマッチを使ったすべての関数で、新しいノードを考慮した修正を必要とします。
一方で、新しい処理を追加するのは、独立した関数を定義するだけなので簡単です。</li>
</ul>

<p>パターンマッチについてさらに知るために、演算式に対する別の処理、数式微分を定義してみましょう。
この処理についての次のような規則をご存知かもしれません。</p>

<ol>
  <li>和の微分係数は、微分係数の和です。</li>
  <li>何らかの変数 <code class="language-plaintext highlighter-rouge">v</code> の微分係数は、変数 <code class="language-plaintext highlighter-rouge">v</code> に対して微分されるなら1、そうでなければ0です。</li>
  <li>定数の微分係数は0です。</li>
</ol>

<p>これら規則はほぼ文字通り Scala コードに翻訳でき、次の定義が得られます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def derive(t: Tree, v: String): Tree = t match {
  case Sum(l, r) =&gt; Sum(derive(l, v), derive(r, v))
  case Var(n) if (v == n) =&gt; Const(1)
  case _ =&gt; Const(0)
}
</code></pre></div></div>

<p>この関数はパターンマッチに関連して2つの新しい概念を紹介しています。
はじめに、変数への <code class="language-plaintext highlighter-rouge">case</code> 式が、<code class="language-plaintext highlighter-rouge">if</code> キーワードに続く式、<strong>ガード</strong>を持っています。
このガードは、その式が真でない限りパターンマッチが成功するのを防ぎます。
ここでのガードの使用は、微分される変数の名前が微分の変数 <code class="language-plaintext highlighter-rouge">v</code> と同じときにだけ、定数<code class="language-plaintext highlighter-rouge">1</code> を返すことを保証するためです。
ここで使われているパターンマッチの新しい特徴2つ目は、<code class="language-plaintext highlighter-rouge">_</code> で書かれている<strong>ワイルドカード</strong>です。
それはどんな値にもマッチして、名前をつけないパターンです。</p>

<p>パターンマッチの全力をまだ探っていませんが、この文章を短くするためにここで止めておきます。
実例について上の2つの関数がどのように実行するかをまだ見たいですね。
そのために、式 <code class="language-plaintext highlighter-rouge">(x+x)+(7+y)</code> にいくつかの処理を実行する簡単な <code class="language-plaintext highlighter-rouge">main</code> 関数を書いてみましょう。
まず環境における値 <code class="language-plaintext highlighter-rouge">{ x -&gt; 5, y -&gt; 7 }</code> を計算し、次に <code class="language-plaintext highlighter-rouge">x</code> そして <code class="language-plaintext highlighter-rouge">y</code> についての微分係数を計算します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def main(args: Array[String]): Unit = {
  val exp: Tree = Sum(Sum(Var("x"),Var("x")),Sum(Const(7),Var("y")))
  val env: Environment = { case "x" =&gt; 5 case "y" =&gt; 7 }
  println("Expression: " + exp)
  println("Evaluation with x=5, y=7: " + eval(exp, env))
  println("Derivative relative to x:\n " + derive(exp, "x"))
  println("Derivative relative to y:\n " + derive(exp, "y"))
}
</code></pre></div></div>

<p>コンパイルする前に、<code class="language-plaintext highlighter-rouge">Environment</code> 型、<code class="language-plaintext highlighter-rouge">eval</code>、<code class="language-plaintext highlighter-rouge">derive</code> そして <code class="language-plaintext highlighter-rouge">main</code> メソッドを <code class="language-plaintext highlighter-rouge">Calc</code> オブジェクトで包む必要があります。
このプログラムを実行することで、期待する結果が得られます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Expression: Sum(Sum(Var(x),Var(x)),Sum(Const(7),Var(y)))
Evaluation with x=5, y=7: 24
Derivative relative to x:
 Sum(Sum(Const(1),Const(1)),Sum(Const(0),Const(0)))
Derivative relative to y:
 Sum(Sum(Const(0),Const(0)),Sum(Const(0),Const(1)))
</code></pre></div></div>

<p>出力を観察することで、微分係数の結果はユーザーに示されるより前にシンプルにすべきことに気づきます。
パターンマッチを使った基本的なシンプル化の定義は興味深い（ですが驚くほど一筋縄ではいかない）問題なので、読者への練習問題として残しておきます。</p>

<h2 id="トレイト">トレイト</h2>

<p>スーパークラスからコードを継承するのとは別に、Scala クラスは1つ以上の<strong>トレイト</strong>からコードを取り込めます。</p>

<p>おそらく Java プログラマーにとってトレイトを理解するもっとも簡単な方法は、コードを含むことができるインターフェースとしてとらえることでしょう
Scala では、クラスがトレイトから継承するとき、トレイトのインターフェースを実装し、トレイトに含まれるコードをすべて継承します。</p>

<p>（注：Java 8 からは、Java インターフェースも同様にコードを含めるようになった。<code class="language-plaintext highlighter-rouge">default</code> キーワードをつけるか、または static メソッドとして)</p>

<p>トレイトの有用性を見るため、古典的な例、順序付きオブジェクトを見てみましょう。
あるクラスのオブジェクト同士を順序比較できると、例えば並び替え（ソート）できて、便利なことが多いです。
Java では、比較できるオブジェクトは <code class="language-plaintext highlighter-rouge">Comparable</code> インターフェースを実装します。
Scala では、<code class="language-plaintext highlighter-rouge">Comparable</code> 相当を <code class="language-plaintext highlighter-rouge">Ord</code> という名前のトレイトとして定義することで、Java よりも少しだけ良くなっています。</p>

<p>オブジェクトを比較するとき、6つの異なる述語（より小さい、より小さいか等しい、等しい、等しくない、より大きいか等しい、より大きい）が役に立ちます。
しかし、これらすべてを定義するのは、これら6つのうち4つは残りの2つを使って表現できるので、退屈です。
つまり、例えば「等しい」と「より小さい」の述語があれば、他を表現できるということです。
Scala では、これらの観察結果は以下のトレイト宣言にうまくとらえられます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>trait Ord {
  def &lt; (that: Any): Boolean
  def &lt;=(that: Any): Boolean =  (this &lt; that) || (this == that)
  def &gt; (that: Any): Boolean = !(this &lt;= that)
  def &gt;=(that: Any): Boolean = !(this &lt; that)
}
</code></pre></div></div>

<p>この定義は、Java の <code class="language-plaintext highlighter-rouge">Comparable</code> インターフェースと同じ働きをする <code class="language-plaintext highlighter-rouge">Ord</code> という新しい型と、3つの述語のデフォルト実装を4つ目の抽象述語を使うことで作成しています。
等式と不等式の述語はすべてのオブジェクトにデフォルトで存在するので、ここには現れていません。</p>

<p>上で使われた型 <code class="language-plaintext highlighter-rouge">Any</code> は、Scala における <code class="language-plaintext highlighter-rouge">Any</code> 以外すべてのクラスのスーパー型です。
Java の <code class="language-plaintext highlighter-rouge">Object</code> 型のより一般的なものとしてとらえられます。
というのも <code class="language-plaintext highlighter-rouge">Int</code> や <code class="language-plaintext highlighter-rouge">Float</code> など基本型のスーパー型でもあるからです
（訳注：Java では <code class="language-plaintext highlighter-rouge">int</code> や <code class="language-plaintext highlighter-rouge">float</code> などのプリミティブ型は <code class="language-plaintext highlighter-rouge">Object</code> ではない）。</p>

<p>よって、あるクラスのオブジェクトを比較可能にするには、相等・不等を検査する述語を定義し、上の <code class="language-plaintext highlighter-rouge">Ord</code> クラスを混ぜ合わせれば十分です。
例として、グレゴリオ暦の日付を <code class="language-plaintext highlighter-rouge">Date</code> クラスを定義してみましょう。
その日付は、日、月、年から構成され、それぞれ整数で表しましょう。
そのため、<code class="language-plaintext highlighter-rouge">Date</code> クラスの定義は次のように始めます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Date(y: Int, m: Int, d: Int) extends Ord {
  def year = y
  def month = m
  def day = d
  override def toString(): String = year + "-" + month + "-" + day
</code></pre></div></div>

<p>ここで重要なのは、クラス名とパラメータのあとに続く <code class="language-plaintext highlighter-rouge">extends Ord</code> という宣言です。
<code class="language-plaintext highlighter-rouge">Date</code> クラスが <code class="language-plaintext highlighter-rouge">Ord</code> トレイトを継承していることを宣言しています。</p>

<p>次に、日付がそれらの個々のフィールドで適切に比較されるように、<code class="language-plaintext highlighter-rouge">Object</code> から継承された <code class="language-plaintext highlighter-rouge">equals</code> メソッドを再定義します。
Java のデフォルト実装はオブジェクトを物理的に比較するので、<code class="language-plaintext highlighter-rouge">equals</code> のデフォルト実装は使えません。
次の定義に到着します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>override def equals(that: Any): Boolean =
  that.isInstanceOf[Date] &amp;&amp; {
    val o = that.asInstanceOf[Date]
    o.day == day &amp;&amp; o.month == month &amp;&amp; o.year == year
  }
</code></pre></div></div>

<p>このメソッドはあらかじめ定義されたメソッド <code class="language-plaintext highlighter-rouge">isInstanceOf</code> と <code class="language-plaintext highlighter-rouge">asInstanceOf</code> を使っています。
1つ目の <code class="language-plaintext highlighter-rouge">isInstanceOf</code> は Java の <code class="language-plaintext highlighter-rouge">instanceof</code> 演算子に相当し、メソッドを適用したオブジェクトが与えられた型のインスタンスであるときに限り、true を返します。
2つ目の <code class="language-plaintext highlighter-rouge">asInstaceOf</code> は Java のキャスト演算子に相当し、オブジェクトが与えられた型のインスタンスであればその型としてみなせるようにし、そうでなければ <code class="language-plaintext highlighter-rouge">ClassCastException</code> を発生させます。</p>

<p>最後に、最後に定義するメソッドは、次のとおり下級かどうかを調べる述語です。
<code class="language-plaintext highlighter-rouge">scala.sys</code> パッケージオブジェクトの別のメソッド <code class="language-plaintext highlighter-rouge">error</code> を使っており、これは与えられたエラーメッセージつきの例外を発生させます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def &lt;(that: Any): Boolean = {
  if (!that.isInstanceOf[Date])
    sys.error("cannot compare " + that + " and a Date")

  val o = that.asInstanceOf[Date]
  (year &lt; o.year) ||
  (year == o.year &amp;&amp; (month &lt; o.month ||
                     (month == o.month &amp;&amp; day &lt; o.day)))
}
</code></pre></div></div>

<p>これで <code class="language-plaintext highlighter-rouge">Date</code> クラスの定義は完成です。
このクラスのインスタンスは、日付としても比較可能なオブジェクトとしても見ることができます。
さらに、それらはすべて上で述べた6つの比較述語を定義しています。
<code class="language-plaintext highlighter-rouge">equals</code> と <code class="language-plaintext highlighter-rouge">&lt;</code> は <code class="language-plaintext highlighter-rouge">Date</code> クラスの定義に直接現れているから、他はそれらが <code class="language-plaintext highlighter-rouge">Ord</code> トレイトから継承されているからです。</p>

<p>ここで示した以外の状況でもトレイトはもちろん便利ですが、その応用を長々と説明するのはこの文章の範囲外です。</p>

<h2 id="ジェネリクス">ジェネリクス</h2>

<p>（訳注：原文では genericity が使われていますが、日本語ではジェネリクスという用語が広く使われているので、ジェネリクスとします）</p>

<p>このチュートリアルで探る Scala の最後の特徴はジェネリクスです。
Java プログラマーであれば、Java 言語におけるジェネリクスの欠如がもたらした問題、Java 5 で対応された欠点について、承知しているはずでしょう。</p>

<p>ジェネリクスとは、型によってパラメータ化されたコードを書ける能力です。
例えば、連結リストのライブラリを書くプログラマーは、リストの要素にどのような型を与えるべきかという問題に直面します。
このリストは多くの様々な文脈で使われはずなので、要素の型が例えば <code class="language-plaintext highlighter-rouge">Int</code> であると決めつけることはできません。
これは完全に恣意的で、あまりにも抑圧的です。</p>

<p>Java プログラマーは、すべてのオブジェクトのスーパー型 <code class="language-plaintext highlighter-rouge">Object</code> の使用に頼ります。
しかしこの解決方法は理想からかけ離れています。
というのも基本型（<code class="language-plaintext highlighter-rouge">int</code>、<code class="language-plaintext highlighter-rouge">long</code>、<code class="language-plaintext highlighter-rouge">float</code>など）では動かないし、プログラマー自身によって動的な型キャストをたくさん挿入することになるからです。</p>

<p>Scala は、ジェネリッククラス（とメソッド）を定義できるようにすることで、この問題を解決しています。
もっとも単純なコンテナークラス（空、または何らかの型のオブジェクトを指し示す、参照）を例に見てみましょう。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Reference[T] {
  private var contents: T = _
  def set(value: T) { contents = value }
  def get: T = contents
}
</code></pre></div></div>

<p>クラス <code class="language-plaintext highlighter-rouge">Reference</code> は、その要素の型である <code class="language-plaintext highlighter-rouge">T</code> という型でパラメーター化されています。
この型は <code class="language-plaintext highlighter-rouge">contents</code> 変数の型として、<code class="language-plaintext highlighter-rouge">set</code> メソッドの引数の型として、<code class="language-plaintext highlighter-rouge">get</code> メソッドの戻り値の型として、クラス本体で使われています。</p>

<p>上のコード例は、Scala における変数を紹介しましたが、さらなる説明は必要ないでしょう。
とはいえ、デフォルトの値を表す <code class="language-plaintext highlighter-rouge">_</code> によって変数の初期値を与えられることは興味深いでしょう。
このデフォルト値は、数値型については0、<code class="language-plaintext highlighter-rouge">Boolean</code> 型には <code class="language-plaintext highlighter-rouge">false</code>、<code class="language-plaintext highlighter-rouge">Unit</code> 型には <code class="language-plaintext highlighter-rouge">()</code>、すべてのオブジェクト型には <code class="language-plaintext highlighter-rouge">null</code> です。</p>

<p><code class="language-plaintext highlighter-rouge">Reference</code> クラスを使うには、型パラメーター <code class="language-plaintext highlighter-rouge">T</code> つまり <code class="language-plaintext highlighter-rouge">cell</code> によって格納される要素の型について、どの型を使うか宣言する必要があります、
例えば、整数を保持する <code class="language-plaintext highlighter-rouge">cell</code> を作成して使うには、以下のように書くことができます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>object IntegerReference {
  def main(args: Array[String]): Unit = {
    val cell = new Reference[Int]
    cell.set(13)
    println("Reference contains the half of " + (cell.get * 2))
  }
}
</code></pre></div></div>

<p>この例から分かるように、<code class="language-plaintext highlighter-rouge">get</code> メソッドから返って来た値を整数として使う前に、キャストする必要はありません。
この特定のセルは整数を保持すると宣言されているので、整数以外を格納できません。</p>

<h2 id="結び">結び</h2>

<p>この文書は Scala 言語の短い概要を説明し、基本的なコード例を示しました。
興味のある読者は、例えば、さらなる説明やコード例がある <strong><a href="https://docs.scala-lang.org/ja/tour/tour-of-scala.html">Scala ツアー</a></strong> に進んでみたり、必要なら <strong><a href="https://www.scala-lang.org/files/archive/spec/2.13/">Scala 言語仕様</a></strong> を調べられます。</p>

				</div>

				<div class="content-contributors">
    <h3>Contributors to this page:</h3>
    <div id="contributors" class="contributors-container"></div>
</div>

			</div>
		</div>

		<!-- TOC -->
		<div class="content-nav">
	<div class="inner-box sidebar-toc-wrapper" style="">
		<h5 class="contents">Contents</h5>
		<div class="inner-toc" id="sidebar-toc">
      <div id="toc"></div>
      
         
         
        <ul id="available-languages" style="display: none;">
          <li><a href="/tutorials/scala-for-java-programmers.html">English</a></li>
          
            
            <li><a href="/es/tutorials/scala-for-java-programmers.html" class="lang">Español</a></li>
          
            
            <li><a href="/ko/tutorials/scala-for-java-programmers.html" class="lang">한국어</a></li>
          
            
            <li><a href="/de/tutorials/scala-for-java-programmers.html" class="lang">Deutsch</a></li>
          
            
            <li><a href="/it/tutorials/scala-for-java-programmers.html" class="lang">Italiano</a></li>
          
            
            <li><a href="/ja/tutorials/scala-for-java-programmers.html" class="lang">日本語</a></li>
          
            
            <li><a href="/zh-tw/tutorials/scala-for-java-programmers.html" class="lang">中文 (繁體)</a></li>
          
        </ul>
      
		</div>
		<hr>
		<div class="help-us"><a href="https://github.com/scala/docs.scala-lang/blob/main/_ja/tutorials/scala-for-java-programmers.md"><i class="fa fa-pencil" aria-hidden="true"></i> Problem with this page?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please help us fix it!</a></div>
	</div>
</div>

	</div>
</section>


</main>

<footer id="site-footer">
    <div class="wrap">
      <div class="site-footer-top">
        
          <ul class="documentation">
            <li><h3>Documentation</h3></li>
            
              <li><a href="/getting-started.html">Getting Started</a></li>
            
              <li><a href="https://www.scala-lang.org/api/current/index.html">API</a></li>
            
              <li><a href="/overviews">Overviews/Guides</a></li>
            
              <li><a href="http://scala-lang.org/files/archive/spec/2.13/">Language Specification</a></li>
            
          </ul>
        
          <ul class="download">
            <li><h3>Download</h3></li>
            
              <li><a href="http://scala-lang.org/download/">Current Version</a></li>
            
              <li><a href="http://scala-lang.org/download/all.html">All versions</a></li>
            
          </ul>
        
          <ul class="community">
            <li><h3>Community</h3></li>
            
              <li><a href="http://scala-lang.org/community/">Community</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#mailing-lists">Mailing Lists</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#chat-rooms">Chat Rooms & More</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#community-libraries-and-tools">Libraries and Tools</a></li>
            
              <li><a href="http://scala.epfl.ch/">The Scala Center</a></li>
            
          </ul>
        
          <ul class="contribute">
            <li><h3>Contribute</h3></li>
            
              <li><a href="http://scala-lang.org/contribute/">How to help</a></li>
            
              <li><a href="http://scala-lang.org/contribute/bug-reporting-guide.html">Report an Issue</a></li>
            
          </ul>
        
          <ul class="scala">
            <li><h3>Scala</h3></li>
            
              <li><a href="http://scala-lang.org/blog/">Blog</a></li>
            
              <li><a href="http://scala-lang.org/conduct/">Code of Conduct</a></li>
            
              <li><a href="http://scala-lang.org/license/">License</a></li>
            
          </ul>
        
          <ul class="social">
            <li><h3>Social</h3></li>
            
              <li><a href="https://github.com/scala/scala">GitHub</a></li>
            
              <li><a href="https://twitter.com/scala_lang">Twitter</a></li>
            
          </ul>
        
      </div>
      <div class="site-footer-bottom">
        <p></p>
        <img src="/resources/img/frontpage/scala-logo-white.png" alt="">
      </div>
    </div>
    <a class="back-to-top in" href="#" id="scroll-to-top-btn">
      <i class="fa fa-angle-up"></i>
    </a>
</footer>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
<script>(window.jQuery) || document.write('<script src="/scripts/jquery-3.1.1.min.js"><\/script>');</script>
<script src="/resources/js/vendor/jquery.autocomplete.js" type="text/javascript"></script>



<script src="/scripts/searchbar.js" type="text/javascript"></script>
<link rel="stylesheet" href="/scripts/my.css" type="text/css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css">

<!-- moment js -->
<script src="/resources/js/vendor/moment.min.js" type="text/javascript"></script>

<!-- tweet feed -->
<script src="/resources/js/tweetMachine-update.js" type="text/javascript"></script>

<!-- prettify js -->
<script src="/resources/js/vendor/prettify/prettify.js" type="text/javascript"></script>
<script src="/resources/js/vendor/prettify/lang-scala.js" type="text/javascript"></script>

<!-- unslider js -->
<script src="/resources/js/vendor/unslider.js" type="text/javascript"></script>

<!-- Highlight -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/languages/scala.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/languages/java.min.js" type="text/javascript"></script>

<!-- CodeMirror -->
<script src="/resources/js/vendor/codemirror/codemirror.js" type="text/javascript"></script>
<script src="/resources/js/vendor/codemirror/clike.js" type="text/javascript"></script>

<!-- TOC -->
<script src="/resources/js/vendor/toc.js" type="text/javascript"></script>

<!-- Blog search -->
<script src="/resources/js/vendor/jekyll.search.min.js" type="text/javascript"></script>

<!-- Custom JavaScript -->
<script src="/resources/js/functions.js" type="text/javascript"></script>



<!-- Alogolia search for doc -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
if ($("#doc-search-bar").length) {
  docsearch({
    apiKey: 'fbc439670f5d4e3730cdcb715c359391',
    indexName: 'scala-lang',
    inputSelector: '#doc-search-bar',
    algoliaOptions: { 'facetFilters': ["language:en"] },
    debug: false // Set debug to true if you want to inspect the dropdown
  });
}
</script>
</body>

</html>

