<!DOCTYPE html>

<html>

  <head>
    <title>
      SIP-NN - Curried varargs | 
      
      Scala Documentation
    </title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:site_name" content="Scala Documentation"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://0.0.0.0:4000/sips/curried-varargs.html"/>
    <meta property="og:image" content="http://0.0.0.0:4000/resources/img/scala-spiral-3d-2-toned-down.png"/>
    <meta property="og:title" content="SIP-NN - Curried varargs"/>
    

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@scala_lang"/>
    <meta name="twitter:creator" content="@scala_lang"/>
    <meta name="twitter:title" content="SIP-NN - Curried varargs"/>
    

    <link rel="icon" type="image/png" href="docs.scala-lang//resources/favicon.ico">
    <link rel="shortcut icon" type="image/png" href="docs.scala-lang//resources/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="docs.scala-lang//resources/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="docs.scala-lang//resources/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="docs.scala-lang//resources/favicon-16x16.png">
    <link rel="manifest" href="docs.scala-lang//resources/site.webmanifest">
    <link rel="mask-icon" href="docs.scala-lang//resources/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#15a9ce">
    <meta name="theme-color" content="#ffffff">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!-- Custom stylesheet -->
    <link href="docs.scala-lang//resources/css/unslider-dots.css" rel="stylesheet" type="text/css">
    <link href="docs.scala-lang//resources/css/unslider.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="docs.scala-lang//resources/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="docs.scala-lang//resources/css/style.css" type="text/css" />
    <link rel="stylesheet" href="docs.scala-lang//resources/css/monospace.css" type="text/css" />

    <!-- Atom feeds -->
    <link rel="alternate" type="application/atom+xml" title="News Feed" href="http://scala-lang.org/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Feed" href="http://scala-lang.org/feed/blog.xml" />

    <!-- Algolia stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head>
  <body>





<div class="navigation-fade-screen"></div>



<header id="site-header">
  <div class="wrap">
    <nav class="navigation" role="menu">
      <a href="http://scala-lang.org" class="navigation-bdand">
        <img src="docs.scala-lang//resources/img/frontpage/scala-logo-white@2x.png" alt="">
      </a>
      <div class="navigation-panel-button">
        <i class="fa fa-bars"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              <a href="docs.scala-lang//" class="active">Documentation</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/download/" >Download</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/community/" >Community</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://index.scala-lang.org" >Libraries</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/contribute/" >Contribute</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/blog/" >Blog</a>
            </li>
        
      </ul>
    </nav>
  </div>
</header>



<header id="doc-header">

  <div class="wrap" style="padding: 0px;">
    <nav class="doc-navigation" role="menu">
      
      <div class="navigation-bdand">
      <a href="docs.scala-lang//">
        <img src="docs.scala-lang//resources/img/documentation-logo@2x.png" alt="docs">
      </a>
      <span class="doc-language-version">
        â€” Scala  2 
      </span>
      </div>
      <div class="navigation-ellipsis">
        <i class="fa fa-ellipsis-v"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              
              
              <a href="#" id="api" >API</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    
                    
                    <a href="https://www.scala-lang.org/api/current/">Current</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="docs.scala-lang//api/all.html">All Versions</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="#" id="learn" >Learn</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    
                    
                    <a href="docs.scala-lang//getting-started/index.html">Getting Started</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="docs.scala-lang//tour/tour-of-scala.html">Tour of Scala</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="docs.scala-lang//overviews/scala-book/introduction.html">Scala Book</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="docs.scala-lang//tutorials/scala-for-java-programmers.html">Scala for Java Programmers</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="docs.scala-lang//learn.html">Online Resources</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="#" id="reference" >Reference</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    
                    
                    <a href="docs.scala-lang//overviews/index.html">Guides & Overviews</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="docs.scala-lang//books.html">Books</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="docs.scala-lang//tutorials/FAQ/index.html">Scala FAQ</a>
                  </li>
                
                  <li>
                    
                    
                    <a href="http://scala-lang.org/files/archive/spec/2.13/">Language Spec</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="docs.scala-lang//style/index.html" id="style guide" >Style Guide</a>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="docs.scala-lang//cheatsheets/index.html" id="cheatsheet" >Cheatsheet</a>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="docs.scala-lang//glossary/index.html" id="glossary" >Glossary</a>
                
            </li>
        
            <li class="navigation-menu-item">
              
              
              <a href="docs.scala-lang//sips/index.html" id="sips" >SIPs</a>
                
            </li>
        
      </ul>
    </nav>
    <nav class="doc-navigation-submenus">
      
        
          <ul class="navigation-submenu" id="api" style="display: none;">
            
              <li>
                <a href="https://www.scala-lang.org/api/current/">Current</a>
              </li>
            
              <li>
                <a href="docs.scala-lang//api/all.html">All Versions</a>
              </li>
            
          </ul>
        
      
        
          <ul class="navigation-submenu" id="learn" style="display: none;">
            
              <li>
                <a href="docs.scala-lang//getting-started/index.html">Getting Started</a>
              </li>
            
              <li>
                <a href="docs.scala-lang//tour/tour-of-scala.html">Tour of Scala</a>
              </li>
            
              <li>
                <a href="docs.scala-lang//overviews/scala-book/introduction.html">Scala Book</a>
              </li>
            
              <li>
                <a href="docs.scala-lang//tutorials/scala-for-java-programmers.html">Scala for Java Programmers</a>
              </li>
            
              <li>
                <a href="docs.scala-lang//learn.html">Online Resources</a>
              </li>
            
          </ul>
        
      
        
          <ul class="navigation-submenu" id="reference" style="display: none;">
            
              <li>
                <a href="docs.scala-lang//overviews/index.html">Guides & Overviews</a>
              </li>
            
              <li>
                <a href="docs.scala-lang//books.html">Books</a>
              </li>
            
              <li>
                <a href="docs.scala-lang//tutorials/FAQ/index.html">Scala FAQ</a>
              </li>
            
              <li>
                <a href="http://scala-lang.org/files/archive/spec/2.13/">Language Spec</a>
              </li>
            
          </ul>
        
      
        
      
        
      
        
      
        
      
      <ul class="navigation-submenu ellipsis-menu" style="display: none;">
        
          
        
          
        
          
        
          
            <li><a href="docs.scala-lang//style/index.html">Style Guide</a></li>
          
        
          
            <li><a href="docs.scala-lang//cheatsheets/index.html">Cheatsheet</a></li>
          
        
          
            <li><a href="docs.scala-lang//glossary/index.html">Glossary</a></li>
          
        
          
            <li><a href="docs.scala-lang//sips/index.html">SIPs</a></li>
          
        
      </ul>
    </nav>
  </div>
</header>


<main id="inner-main">
  <!-- Title -->
  <section class="title-page">
    <div class="wrap">
      <div class="content-title-documentation">
        

        <div class="titles">
          
            <div class="supertitle">&nbsp;</div>
          
          <h1>SIP-NN - Curried varargs</h1>
        </div>
        <div class="language-dropdown">
          <div id="dd" class="wrapper-dropdown" tabindex="1">
            <span>Language</span>
              <ul class="dropdown"></ul>
          </div>
      </div>
    </div>
  </section>

  
  <section class="content">
	<div class="wrap">
		<div class="content-primary documentation">
			<div class="inner-box toc-context">
				<p><strong>By: Yang, Bo</strong></p>

<h2 id="history">History</h2>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Aug 11th 2019</td>
      <td>Initial Draft</td>
    </tr>
    <tr>
      <td>Aug 12th 2019</td>
      <td>Translating sequence arguments to <code class="language-plaintext highlighter-rouge">applyNextSeq</code> calls</td>
    </tr>
  </tbody>
</table>

<h2 id="introduction">Introduction</h2>

<p>The <a href="https://scala-lang.org/files/archive/spec/2.13/04-basic-declarations-and-definitions.html#repeated-parameters">repeated parameters</a> syntax is widely used in Scala libraries to create collection initializers, string interpolations, and DSLs. Unfortunately, repeated parameters are type unsafe as it erase all arguments to their common supertype, inefficient as it creates a temporary <code class="language-plaintext highlighter-rouge">Seq</code> that is difficult to be eliminated by optimizer. In practice, all sophisticated string interpolation libraries, including <a href="https://github.com/scala/scala/blob/43e040ff7e4ba92ccf223e77540580b32c1473c0/src/library/scala/StringContext.scala#L94">string formatting</a> and <a href="https://github.com/scala/scala/blob/43e040ff7e4ba92ccf223e77540580b32c1473c0/src/reflect/scala/reflect/api/Quasiquotes.scala#L28">quasiquotes</a> in standard library, <a href="https://scalameta.org/docs/trees/quasiquotes.html">scalameta</a> and my <a href="https://github.com/Atry/fastring/blob/67ae4eccdb9b7f58416ed90eae85ddb035b1ffb1/shared/src/main/scala/com/dongxiguo/fastring/Fastring.scala#L242">fastring</a> library, are written in macros in order to avoid runtime overhead of repeated parameters.</p>

<p>We propose <strong>curried varargs</strong> to improve both the type safety and the performance. Given a function call <code class="language-plaintext highlighter-rouge">f(a, b, c)</code>, when <code class="language-plaintext highlighter-rouge">f</code> is a subtype of <code class="language-plaintext highlighter-rouge">Curried</code>, the function call should be rewritten to <code class="language-plaintext highlighter-rouge">f.applyBegin.applyNext(a).applyNext(b).applyNext(c).applyEnd</code>.</p>

<h2 id="motivating-examples">Motivating Examples</h2>

<h3 id="examples">Examples</h3>

<p>Recently I was working on the implementation of <a href="https://contributors.scala-lang.org/t/pre-sip-name-based-xml-literals/2175">Pre SIP: name based XML literals</a>. During implementing that proposal, I found that the proposal is inefficiency due to repeated parameters, and it could be improved dramatically with the help of curried functions.</p>

<p>For example, according to the proposal the XML literal <code class="language-plaintext highlighter-rouge">&lt;div title="my-title"&gt;line1&lt;br/&gt;line2&lt;/div&gt;</code> will result the following code:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">xml</span><span class="o">.</span><span class="py">tags</span><span class="o">.</span><span class="py">div</span><span class="o">(</span>
  <span class="nv">xml</span><span class="o">.</span><span class="py">attributes</span><span class="o">.</span><span class="py">title</span><span class="o">(</span><span class="nv">xml</span><span class="o">.</span><span class="py">text</span><span class="o">(</span><span class="s">"my-title"</span><span class="o">)),</span>
  <span class="nv">xml</span><span class="o">.</span><span class="py">text</span><span class="o">(</span><span class="s">"line1"</span><span class="o">),</span>
  <span class="nv">xml</span><span class="o">.</span><span class="py">tags</span><span class="o">.</span><span class="py">br</span><span class="o">(),</span>
  <span class="nv">xml</span><span class="o">.</span><span class="py">text</span><span class="o">(</span><span class="s">"line2"</span><span class="o">)</span>
<span class="o">)</span>
</code></pre></div></div>

<p>With the help of this curried varargs proposal and <code class="language-plaintext highlighter-rouge">@inline</code>, we are able to implement an API to build a DOM tree with no additional overhead over manually written Scala code.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">org.scalajs.dom.document</span>
<span class="k">import</span> <span class="nn">org.scalajs.dom.raw._</span>

<span class="k">object</span> <span class="nc">xml</span> <span class="o">{</span>
  <span class="k">type</span> <span class="kt">Attribute</span><span class="o">[</span><span class="kt">-A</span> <span class="k">&lt;:</span> <span class="kt">Element</span><span class="o">]</span> <span class="k">=</span> <span class="n">A</span> <span class="k">=&gt;</span> <span class="nc">Unit</span>
  <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">text</span><span class="o">(</span><span class="n">data</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=</span> <span class="n">data</span>
  <span class="k">object</span> <span class="nc">attributes</span> <span class="o">{</span>
    <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">title</span><span class="o">(</span><span class="n">value</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Attribute</span><span class="o">[</span><span class="kt">Element</span><span class="o">]</span> <span class="k">=</span> <span class="nv">_</span><span class="o">.</span><span class="py">setAttribute</span><span class="o">(</span><span class="s">"title"</span><span class="o">,</span> <span class="n">value</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="k">object</span> <span class="nc">tags</span> <span class="o">{</span>
    <span class="k">class</span> <span class="nc">Builder</span><span class="o">[</span><span class="kt">+E</span> <span class="k">&lt;:</span> <span class="kt">Element</span><span class="o">](</span><span class="k">private</span> <span class="k">val</span> <span class="nv">element</span><span class="k">:</span> <span class="kt">E</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">AnyVal</span> <span class="k">with</span> <span class="nc">Curried</span> <span class="o">{</span>
      <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">applyBegin</span> <span class="k">=</span> <span class="k">this</span>
      <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">applyNext</span><span class="o">(</span><span class="n">text</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
        <span class="nv">element</span><span class="o">.</span><span class="py">appendChild</span><span class="o">(</span><span class="nv">document</span><span class="o">.</span><span class="py">createTextNode</span><span class="o">(</span><span class="n">text</span><span class="o">))</span>
        <span class="k">this</span>
      <span class="o">}</span>
      <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">applyNext</span><span class="o">(</span><span class="n">node</span><span class="k">:</span> <span class="kt">Node</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
        <span class="nv">element</span><span class="o">.</span><span class="py">appendChild</span><span class="o">(</span><span class="n">node</span><span class="o">)</span>
        <span class="k">this</span>
      <span class="o">}</span>
      <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">applyNext</span><span class="o">[</span><span class="kt">A</span> <span class="k">&lt;:</span> <span class="kt">Attribute</span><span class="o">[</span><span class="kt">E</span><span class="o">]](</span><span class="n">attribute</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
        <span class="nf">attribute</span><span class="o">(</span><span class="n">element</span><span class="o">)</span>
        <span class="k">this</span>
      <span class="o">}</span>
      <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">applyEnd</span> <span class="k">=</span> <span class="n">element</span>
    <span class="o">}</span>
    <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">div</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Builder</span><span class="o">(</span><span class="nv">document</span><span class="o">.</span><span class="py">createElement</span><span class="o">(</span><span class="s">"div"</span><span class="o">))</span>
    <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">br</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Builder</span><span class="o">(</span><span class="nv">document</span><span class="o">.</span><span class="py">createElement</span><span class="o">(</span><span class="s">"br"</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Since <code class="language-plaintext highlighter-rouge">xml.tags.div</code> returns a <code class="language-plaintext highlighter-rouge">Builder</code>, which is a subtype of <code class="language-plaintext highlighter-rouge">Curried</code>, calls on <code class="language-plaintext highlighter-rouge">xml.tags.div</code> will be translated to the curried form, as shown below:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">xml</span><span class="o">.</span><span class="py">tags</span><span class="o">.</span><span class="py">div</span>
  <span class="o">.</span><span class="py">applyBegin</span>
  <span class="o">.</span><span class="py">applyNext</span><span class="o">(</span><span class="nv">xml</span><span class="o">.</span><span class="py">attributes</span><span class="o">.</span><span class="py">title</span><span class="o">(</span><span class="nv">xml</span><span class="o">.</span><span class="py">text</span><span class="o">(</span><span class="s">"my-title"</span><span class="o">)))</span>
  <span class="o">.</span><span class="py">applyNext</span><span class="o">(</span><span class="nv">xml</span><span class="o">.</span><span class="py">text</span><span class="o">(</span><span class="s">"line1"</span><span class="o">))</span>
  <span class="o">.</span><span class="py">applyNext</span><span class="o">(</span><span class="nv">xml</span><span class="o">.</span><span class="py">tags</span><span class="o">.</span><span class="py">br</span><span class="o">.</span><span class="py">applyBegin</span><span class="o">.</span><span class="py">applyEnd</span><span class="o">)</span>
  <span class="o">.</span><span class="py">applyNext</span><span class="o">(</span><span class="nv">xml</span><span class="o">.</span><span class="py">text</span><span class="o">(</span><span class="s">"line2"</span><span class="o">))</span>
  <span class="o">.</span><span class="py">applyEnd</span>
</code></pre></div></div>

<p>When the above code is compiled in Scala.js, the builders should be eliminated entirely as a zero cost abstraction layer, and the output JavaScript is tiny as shown below:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">$$this</span> <span class="o">=</span> <span class="nx">$m_Lorg_scalajs_dom_package$</span><span class="p">().</span><span class="nx">document__Lorg_scalajs_dom_raw_HTMLDocument</span><span class="p">().</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">$$this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">my-title</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">$$this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">$m_Lorg_scalajs_dom_package$</span><span class="p">().</span><span class="nx">document__Lorg_scalajs_dom_raw_HTMLDocument</span><span class="p">().</span><span class="nx">createTextNode</span><span class="p">(</span><span class="dl">"</span><span class="s2">line1</span><span class="dl">"</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">$$this$1</span> <span class="o">=</span> <span class="nx">$m_Lorg_scalajs_dom_package$</span><span class="p">().</span><span class="nx">document__Lorg_scalajs_dom_raw_HTMLDocument</span><span class="p">().</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">br</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">$$this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">$$this$1</span><span class="p">);</span>
<span class="nx">$$this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">$m_Lorg_scalajs_dom_package$</span><span class="p">().</span><span class="nx">document__Lorg_scalajs_dom_raw_HTMLDocument</span><span class="p">().</span><span class="nx">createTextNode</span><span class="p">(</span><span class="dl">"</span><span class="s2">line2</span><span class="dl">"</span><span class="p">));</span>
</code></pre></div></div>

<h3 id="comparison-examples">Comparison Examples</h3>

<p>The <code class="language-plaintext highlighter-rouge">Builder</code> API can be also implemented in repeated parameters:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">org.scalajs.dom.document</span>
<span class="k">import</span> <span class="nn">org.scalajs.dom.raw._</span>

<span class="k">object</span> <span class="nc">xml</span> <span class="o">{</span>
  <span class="k">type</span> <span class="kt">Attribute</span><span class="o">[</span><span class="kt">-A</span> <span class="k">&lt;:</span> <span class="kt">Element</span><span class="o">]</span> <span class="k">=</span> <span class="n">A</span> <span class="k">=&gt;</span> <span class="nc">Unit</span>
  <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">text</span><span class="o">(</span><span class="n">data</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=</span> <span class="n">data</span>
  <span class="k">object</span> <span class="nc">attributes</span> <span class="o">{</span>
    <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">title</span><span class="o">(</span><span class="n">value</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Attribute</span><span class="o">[</span><span class="kt">Element</span><span class="o">]</span> <span class="k">=</span> <span class="nv">_</span><span class="o">.</span><span class="py">setAttribute</span><span class="o">(</span><span class="s">"title"</span><span class="o">,</span> <span class="n">value</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="k">object</span> <span class="nc">tags</span> <span class="o">{</span>
    <span class="k">class</span> <span class="nc">Builder</span><span class="o">[</span><span class="kt">+E</span> <span class="k">&lt;:</span> <span class="kt">Element</span><span class="o">](</span><span class="k">private</span> <span class="k">val</span> <span class="nv">element</span><span class="k">:</span> <span class="kt">E</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">AnyVal</span> <span class="o">{</span>
      <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">attributesAndChildren</span><span class="k">:</span> <span class="kt">Any*</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
        <span class="nv">attributesAndChildren</span><span class="o">.</span><span class="py">foreach</span> <span class="o">{</span>
          <span class="k">case</span> <span class="n">text</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=&gt;</span>
            <span class="nv">element</span><span class="o">.</span><span class="py">appendChild</span><span class="o">(</span><span class="nv">document</span><span class="o">.</span><span class="py">createTextNode</span><span class="o">(</span><span class="n">text</span><span class="o">))</span>
          <span class="k">case</span> <span class="n">node</span><span class="k">:</span> <span class="kt">Node</span> <span class="o">=&gt;</span>
            <span class="nv">element</span><span class="o">.</span><span class="py">appendChild</span><span class="o">(</span><span class="n">node</span><span class="o">)</span>
          <span class="k">case</span> <span class="n">attribute</span><span class="k">:</span> <span class="kt">Attribute</span><span class="o">[</span><span class="kt">E</span><span class="o">]</span> <span class="k">=&gt;</span>
            <span class="nf">attribute</span><span class="o">(</span><span class="n">element</span><span class="o">)</span>
        <span class="o">}</span>
        <span class="n">element</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">div</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Builder</span><span class="o">(</span><span class="nv">document</span><span class="o">.</span><span class="py">createElement</span><span class="o">(</span><span class="s">"div"</span><span class="o">))</span>
    <span class="nd">@inline</span> <span class="k">def</span> <span class="nf">br</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Builder</span><span class="o">(</span><span class="nv">document</span><span class="o">.</span><span class="py">createElement</span><span class="o">(</span><span class="s">"br"</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>However, the Scala compiler is unable to optimize repeated parameters, as a result, the output JavaScript from Scala.js would look like the below code.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">$$this$1</span> <span class="o">=</span> <span class="nx">$m_Lorg_scalajs_dom_package$</span><span class="p">().</span><span class="nx">document__Lorg_scalajs_dom_raw_HTMLDocument</span><span class="p">().</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="k">this</span><span class="nx">$3</span> <span class="o">=</span> <span class="nx">$m_LScalaFiddle$xml$attributes$</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">jsx$1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">$c_sjsr_AnonFunction1</span><span class="p">().</span><span class="nx">init___sjs_js_Function1</span><span class="p">((</span><span class="kd">function</span><span class="p">(</span><span class="nx">$this</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x$1$2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">x$1$2</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">})(</span><span class="k">this</span><span class="nx">$3</span><span class="p">,</span> <span class="dl">"</span><span class="s2">my-title</span><span class="dl">"</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">$$this</span> <span class="o">=</span> <span class="nx">$m_Lorg_scalajs_dom_package$</span><span class="p">().</span><span class="nx">document__Lorg_scalajs_dom_raw_HTMLDocument</span><span class="p">().</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">br</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="nx">jsx$1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">line1</span><span class="dl">"</span><span class="p">,</span> <span class="nx">$$this</span><span class="p">,</span> <span class="dl">"</span><span class="s2">line2</span><span class="dl">"</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">$uI</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
<span class="k">while</span> <span class="p">((</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">))</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">arg1</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">$is_T</span><span class="p">(</span><span class="nx">arg1</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">$as_T</span><span class="p">(</span><span class="nx">arg1</span><span class="p">);</span>
    <span class="nx">$$this$1</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">$m_Lorg_scalajs_dom_package$</span><span class="p">().</span><span class="nx">document__Lorg_scalajs_dom_raw_HTMLDocument</span><span class="p">().</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">x2</span><span class="p">))</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">$uZ</span><span class="p">((</span><span class="nx">arg1</span> <span class="k">instanceof</span> <span class="nx">$g</span><span class="p">.</span><span class="nx">Node</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">$$this$1</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">arg1</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">$is_F1</span><span class="p">(</span><span class="nx">arg1</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x4</span> <span class="o">=</span> <span class="nx">$as_F1</span><span class="p">(</span><span class="nx">arg1</span><span class="p">);</span>
    <span class="nx">x4</span><span class="p">.</span><span class="nx">apply__O__O</span><span class="p">(</span><span class="nx">$$this$1</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">$c_s_MatchError</span><span class="p">().</span><span class="nx">init___O</span><span class="p">(</span><span class="nx">arg1</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">i</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span> <span class="o">+</span> <span class="nx">i</span><span class="p">)</span> <span class="o">|</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Despite of the type safety issue due to the usage of <code class="language-plaintext highlighter-rouge">Any</code>, the above code are inefficient:</p>

<ol>
  <li>Unnecessary temporary object for the <code class="language-plaintext highlighter-rouge">xml.attributes.title(xml.text("my-title"))</code>.</li>
  <li>Unnecessary temporary <code class="language-plaintext highlighter-rouge">Seq</code> to hold repeated parameters.</li>
  <li>Unnecessary runtime type check for each argument.</li>
</ol>

<p>The similar issues can be found in many other usage of repeated parameters. For example, Scala string interpolation is inefficient due to its internal vararg function call, unless implementing it in a macro; Scala collection initializers (e.g. <code class="language-plaintext highlighter-rouge">List(1, 2, 3)</code>) create unnecessary temporary <code class="language-plaintext highlighter-rouge">Seq</code> before creating the desired collection.</p>

<h2 id="design">Design</h2>

<p>This proposal introduces a new type <code class="language-plaintext highlighter-rouge">Curried</code> defined as following:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">Curried</span> <span class="k">extends</span> <span class="nc">Any</span>
</code></pre></div></div>

<p>When a function call <code class="language-plaintext highlighter-rouge">f(p1, p2, p3, ... pn)</code> is being type checked, the compiler will firstly look for <code class="language-plaintext highlighter-rouge">apply</code> method on <code class="language-plaintext highlighter-rouge">f</code>. If an applicable <code class="language-plaintext highlighter-rouge">apply</code> method is not found and <code class="language-plaintext highlighter-rouge">f</code> is a subtype of <code class="language-plaintext highlighter-rouge">Curried</code>, the compiler will convert the function call to curried form <code class="language-plaintext highlighter-rouge">f.applyBegin.applyNext(p1).applyNext(p2).applyNext(p3) ... .applyNext(pn).applyEnd</code>, and continue type checking the translated call.</p>

<h3 id="expanding-sequence-argument">Expanding sequence argument</h3>

<p>Optionally, some arguments to a <code class="language-plaintext highlighter-rouge">Curried</code> call may be a sequence argument marked as  <code class="language-plaintext highlighter-rouge">_*</code>. Those are arguments should be translated to <code class="language-plaintext highlighter-rouge">applyNextSeq</code> calls instead of <code class="language-plaintext highlighter-rouge">applyNext</code>. For example, <code class="language-plaintext highlighter-rouge">f(p1, s1: _*, p2)</code> will be translated to the following code.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">f</span><span class="o">.</span><span class="py">applyBegin</span>
  <span class="o">.</span><span class="py">applyNext</span><span class="o">(</span><span class="n">p1</span><span class="o">)</span>
  <span class="o">.</span><span class="py">applyNextSeq</span><span class="o">(</span><span class="n">s1</span><span class="o">)</span>
  <span class="o">.</span><span class="py">applyNext</span><span class="o">(</span><span class="n">p2</span><span class="o">)</span>
<span class="o">.</span><span class="py">applyEnd</span>
</code></pre></div></div>

<p>Unlike traditional repeated parameters, which restrict the sequence argument at the last position, sequence arguments in a curried call are allowed at any position.</p>

<h3 id="builder-type-shifting">Builder type shifting</h3>

<p>The type of partially applied function might be changed during applying each argument. Given the following type signature:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ListBuilder</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">applyNext</span><span class="o">[</span><span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">A</span><span class="o">](</span><span class="n">b</span><span class="k">:</span> <span class="kt">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">ListBuilder</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
  <span class="k">def</span> <span class="nf">applyNextSeq</span><span class="o">[</span><span class="kt">B</span> <span class="k">&gt;:</span> <span class="kt">A</span><span class="o">](</span><span class="n">seqB</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">ListBuilder</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
  <span class="k">def</span> <span class="nf">applyEnd</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
<span class="o">}</span>
<span class="k">object</span> <span class="nc">List</span> <span class="k">extends</span> <span class="nc">Curried</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">applyBegin</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span><span class="k">:</span> <span class="kt">ListBuilder</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">List(42, "a")</code> should be translated to <code class="language-plaintext highlighter-rouge">List.applyBegin.applyNext(42).applyNext("a").applyEnd</code>. Then, the typer will infer type parameters as <code class="language-plaintext highlighter-rouge">List.applyBegin[Nothing].applyNext[Int](42).applyNext[Any]("a").applyEnd</code>, therefore the final return type of <code class="language-plaintext highlighter-rouge">applyEnd</code> will be <code class="language-plaintext highlighter-rouge">List[Any]</code>.</p>

<h3 id="explicit-type-parameters">Explicit type parameters</h3>

<p>When a <code class="language-plaintext highlighter-rouge">Curried</code> is invoked with some type arguments, those type arguments will be moved to the <code class="language-plaintext highlighter-rouge">applyBegin</code> method. Therefore, <code class="language-plaintext highlighter-rouge">List[Int](1 to 3: _*)</code> should be translated to <code class="language-plaintext highlighter-rouge">List.applyBegin[Int].applyNextSeq(1 to 3).applyEnd</code>.</p>

<h3 id="implicit-parameters">Implicit parameters</h3>

<p>A more common form of curried function call would be like <code class="language-plaintext highlighter-rouge">f(a)(b)(c)</code>. We prefer the explicit named method calls to <code class="language-plaintext highlighter-rouge">applyNext</code> instead of the common form, in order to support implicit parameters in <code class="language-plaintext highlighter-rouge">applyNext</code>. Therefore, each explicit parameter might come with an implicit parameter list, resolving the infamous <a href="https://github.com/scala/bug/issues/4719">multiple type parameter lists</a> issue.</p>

<h3 id="multiple-curried-vararg-parameter-lists">Multiple curried vararg parameter lists</h3>

<p>When a <code class="language-plaintext highlighter-rouge">Curried</code> is invoked with multiple parameter lists, for example:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">f</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">)(</span><span class="n">d</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span>
</code></pre></div></div>

<p>Then the first parameter list should be translated to a curried call:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">f</span><span class="o">.</span><span class="py">applyBegin</span>
  <span class="o">.</span><span class="py">applyNext</span><span class="o">(</span><span class="n">a</span><span class="o">)</span>
  <span class="o">.</span><span class="py">applyNext</span><span class="o">(</span><span class="n">b</span><span class="o">)</span>
  <span class="o">.</span><span class="py">applyNext</span><span class="o">(</span><span class="n">c</span><span class="o">)</span>
<span class="o">.</span><span class="py">applyEnd</span><span class="o">(</span><span class="n">d</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">(d, e)</code> is translated to the curried form only if <code class="language-plaintext highlighter-rouge">applyEnd</code> returns a <code class="language-plaintext highlighter-rouge">Curried</code>.</p>

<h3 id="overloaded-curried-calls">Overloaded curried calls</h3>

<p>Curried varargs enables overloaded functions for each parameter. Parameters will not be erased to their common supertype.</p>

<h2 id="implementation">Implementation</h2>

<p>This proposal can be implemented either in the Scala compiler or in a whitebox macro. <a href="https://github.com/Atry/Curried.scala">Curried.scala</a> is an implementation of the proposal in a whitebox macro.</p>

<h2 id="alternatives">Alternatives</h2>

<h3 id="repeated-parameters">Repeated parameters</h3>

<p>Repeated parameters are packed into a <code class="language-plaintext highlighter-rouge">Seq</code>, which is then passed to the callee.</p>

<h4 id="pros">Pros</h4>

<ul>
  <li>Interoperable with Java</li>
</ul>

<h4 id="cons">Cons</h4>

<ul>
  <li>Always boxing value class parameters</li>
  <li>Unable to inline function parameters</li>
  <li>Unable to inline call-by-name parameters</li>
  <li>Unable to perform implicit conversion for each parameter</li>
  <li>Unable to infer context bound for each parameter</li>
  <li>Erasing all parameters to their common super type</li>
</ul>

<h2 id="reference">Reference</h2>
<ul>
  <li><a href="https://github.com/Atry/Curried.scala">Existing Implementation (Curried.scala)</a></li>
  <li><a href="https://contributors.scala-lang.org/t/pre-sip-curried-varargs/3608">Discussion on Scala Contributors forum</a></li>
  <li><a href="https://contributors.scala-lang.org/t/pre-sip-name-based-xml-literals/2175">Pre SIP: name based XML literals</a></li>
  <li><a href="https://scala-lang.org/files/archive/spec/2.13/04-basic-declarations-and-definitions.html#repeated-parameters">Scala Language Specification - Repeated Parameters</a></li>
</ul>

			</div>
		</div>

		<!-- TOC -->
    <div class="content-nav">
    	<div class="inner-box sidebar-toc-wrapper sip-toc" style="">
      
        <h5 class="contents">SIP Committee Decision</h5>
         <div class="tag" style="background-color: #b58900">Pending</div>
           <p class="vote-text" style="color: #b58900">
             
           </p>
        
    		<h5 class="contents">SIP Contents</h5>
    		<div class="inner-toc" id="sidebar-toc">
          <div id="toc"></div>
    		</div>
    		<hr>
    		<div class="help-us"><a href="https://github.com/scala/docs.scala-lang/blob/main/_sips/sips/2019-08-11-curried-varargs.md"><i class="fa fa-pencil" aria-hidden="true"></i> Problem with this page?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please help us fix it!</a></div>
    	</div>
    </div>

	</div>
</section>


</main>

<footer id="site-footer">
    <div class="wrap">
      <div class="site-footer-top">
        
          <ul class="documentation">
            <li><h3>Documentation</h3></li>
            
              <li><a href="docs.scala-lang//getting-started.html">Getting Started</a></li>
            
              <li><a href="https://www.scala-lang.org/api/current/index.html">API</a></li>
            
              <li><a href="docs.scala-lang//overviews">Overviews/Guides</a></li>
            
              <li><a href="http://scala-lang.org/files/archive/spec/2.13/">Language Specification</a></li>
            
          </ul>
        
          <ul class="download">
            <li><h3>Download</h3></li>
            
              <li><a href="http://scala-lang.org/download/">Current Version</a></li>
            
              <li><a href="http://scala-lang.org/download/all.html">All versions</a></li>
            
          </ul>
        
          <ul class="community">
            <li><h3>Community</h3></li>
            
              <li><a href="http://scala-lang.org/community/">Community</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#mailing-lists">Mailing Lists</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#chat-rooms">Chat Rooms & More</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#community-libraries-and-tools">Libraries and Tools</a></li>
            
              <li><a href="http://scala.epfl.ch/">The Scala Center</a></li>
            
          </ul>
        
          <ul class="contribute">
            <li><h3>Contribute</h3></li>
            
              <li><a href="http://scala-lang.org/contribute/">How to help</a></li>
            
              <li><a href="http://scala-lang.org/contribute/bug-reporting-guide.html">Report an Issue</a></li>
            
          </ul>
        
          <ul class="scala">
            <li><h3>Scala</h3></li>
            
              <li><a href="http://scala-lang.org/blog/">Blog</a></li>
            
              <li><a href="http://scala-lang.org/conduct/">Code of Conduct</a></li>
            
              <li><a href="http://scala-lang.org/license/">License</a></li>
            
          </ul>
        
          <ul class="social">
            <li><h3>Social</h3></li>
            
              <li><a href="https://github.com/scala/scala">GitHub</a></li>
            
              <li><a href="https://twitter.com/scala_lang">Twitter</a></li>
            
          </ul>
        
      </div>
      <div class="site-footer-bottom">
        <p></p>
        <img src="docs.scala-lang//resources/img/frontpage/scala-logo-white.png" alt="">
      </div>
    </div>
    <a class="back-to-top in" href="#" id="scroll-to-top-btn">
      <i class="fa fa-angle-up"></i>
    </a>
</footer>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
<script>(window.jQuery) || document.write('<script src="docs.scala-lang//scripts/jquery-3.1.1.min.js"><\/script>');</script>
<script src="docs.scala-lang//resources/js/vendor/jquery.autocomplete.js" type="text/javascript"></script>



<script src="docs.scala-lang//scripts/searchbar.js" type="text/javascript"></script>
<link rel="stylesheet" href="docs.scala-lang//scripts/my.css" type="text/css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css">

<!-- moment js -->
<script src="docs.scala-lang//resources/js/vendor/moment.min.js" type="text/javascript"></script>

<!-- tweet feed -->
<script src="docs.scala-lang//resources/js/tweetMachine-update.js" type="text/javascript"></script>

<!-- prettify js -->
<script src="docs.scala-lang//resources/js/vendor/prettify/prettify.js" type="text/javascript"></script>
<script src="docs.scala-lang//resources/js/vendor/prettify/lang-scala.js" type="text/javascript"></script>

<!-- unslider js -->
<script src="docs.scala-lang//resources/js/vendor/unslider.js" type="text/javascript"></script>

<!-- Highlight -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/languages/scala.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/languages/java.min.js" type="text/javascript"></script>

<!-- CodeMirror -->
<script src="docs.scala-lang//resources/js/vendor/codemirror/codemirror.js" type="text/javascript"></script>
<script src="docs.scala-lang//resources/js/vendor/codemirror/clike.js" type="text/javascript"></script>

<!-- TOC -->
<script src="docs.scala-lang//resources/js/vendor/toc.js" type="text/javascript"></script>

<!-- Blog search -->
<script src="docs.scala-lang//resources/js/vendor/jekyll.search.min.js" type="text/javascript"></script>

<!-- Custom JavaScript -->
<script src="docs.scala-lang//resources/js/functions.js" type="text/javascript"></script>



<!-- Alogolia search for doc -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
if ($("#doc-search-bar").length) {
  docsearch({
    apiKey: 'fbc439670f5d4e3730cdcb715c359391',
    indexName: 'scala-lang',
    inputSelector: '#doc-search-bar',
    algoliaOptions: { 'facetFilters': ["language:en"] },
    debug: false // Set debug to true if you want to inspect the dropdown
  });
}
</script>
</body>

</html>

