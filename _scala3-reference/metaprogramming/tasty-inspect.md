---
title: "TASTy Inspection"
next-page: /scala3/reference/other-new-features
num: 33
type: section
previous-page: /scala3/reference/metaprogramming/reflection
---

<!-- THIS FILE HAS BEEN GENERATED BY SCALADOC PREPROCESSOR.
    The whole process of generation the docs can be found under this README: https://github.com/lampepfl/dotty/blob/master/docs/README.md
    The source file can be found here https://github.com/lampepfl/dotty/edit/master/docs/docs/reference/metaprogramming/tasty-inspect.md
    NOTE THAT ANY CHANGES TO THIS FILE WILL BE OVERRIDEN BY PREPROCESSOR.
-->

<div class="snippet" ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >libraryDependencies += &quot;org.scala-lang&quot; %% &quot;scala3-tasty-inspector&quot; % scalaVersion.value
</span></code></pre></div>

TASTy files contain the full typed tree of a class including source positions
and documentation. This is ideal for tools that analyze or extract semantic
information from the code. To avoid the hassle of working directly with the TASTy
file we provide the `Inspector` which loads the contents and exposes it
through the TASTy reflect API.

## Inspecting TASTy files

To inspect the trees of a TASTy file a consumer can be defined in the following way.

<div class="snippet" ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >import scala.quoted.*
</span><span id="1" class="" >import scala.tasty.inspector.*
</span><span id="2" class="" >
</span><span id="3" class="" >class MyInspector extends Inspector:
</span><span id="4" class="" >   def inspect(using Quotes)(tastys: List[Tasty[quotes.type]]): Unit =
</span><span id="5" class="" >      import quotes.reflect.*
</span><span id="6" class="" >      for tasty &lt;- tastys do
</span><span id="7" class="" >         val tree = tasty.ast
</span><span id="8" class="" >         // Do something with the tree
</span></code></pre></div>

Then the consumer can be instantiated with the following code to get the tree of the `foo/Bar.tasty` file.

<div class="snippet" ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >object Test:
</span><span id="1" class="" >   def main(args: Array[String]): Unit =
</span><span id="2" class="" >      val tastyFiles = List(&quot;foo/Bar.tasty&quot;)
</span><span id="3" class="" >      TastyInspector.inspectTastyFiles(tastyFiles)(new MyInspector)
</span></code></pre></div>

Note that if we need to run the main (in the example below defined in an object called `Test`) after compilation we need to make the compiler available to the runtime:

```shell
scalac -d out Test.scala
scala -with-compiler -classpath out Test
```

## Template project

Using sbt version `1.1.5+`, do:

```shell
sbt new scala/scala3-tasty-inspector.g8
```

in the folder where you want to clone the template.
