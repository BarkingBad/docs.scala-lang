---
layout: singlepage-overview
title: "Deprecated: Nonlocal Returns"
scala3: true
---

<!-- THIS FILE HAS BEEN GENERATED BY SCALADOC PREPROCESSOR.
    The whole process of generation the docs can be found under this README: https://github.com/lampepfl/dotty/blob/master/docs/README.md
    The source file can be found here https://github.com/lampepfl/dotty/edit/master/docs/docs/reference/dropped-features/nonlocal-returns.md
    NOTE THAT ANY CHANGES TO THIS FILE WILL BE OVERRIDEN BY PREPROCESSOR.
-->

Returning from nested anonymous functions has been deprecated.

Nonlocal returns are implemented by throwing and catching `scala.runtime.NonLocalReturnException`-s. This is rarely what is intended by the programmer. It can be problematic because of the hidden performance cost of throwing and catching exceptions. Furthermore, it is a leaky implementation: a catch-all exception handler can intercept a `NonLocalReturnException`.

A drop-in library replacement is provided in [`scala.util.control.NonLocalReturns`](https://scala-lang.org/api/3.x/scala/util/control/NonLocalReturns$.html). Example:

<div class="snippet" scala-snippet ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >import scala.util.control.NonLocalReturns.*
</span><span id="1" class="" >
</span><span id="2" class="" >extension [T](xs: List[T])
</span><span id="3" class="" >  def has(elem: T): Boolean = returning {
</span><span id="4" class="" >    for x &lt;- xs do
</span><span id="5" class="" >      if x == elem then throwReturn(true)
</span><span id="6" class="" >    false
</span><span id="7" class="" >  }
</span><span id="8" class="" >
</span><span id="9" class="" >@main def test(): Unit =
</span><span id="10" class="" >  val xs = List(1, 2, 3, 4, 5)
</span><span id="11" class="" >  assert(xs.has(2) == xs.contains(2))
</span></code></pre></div>
