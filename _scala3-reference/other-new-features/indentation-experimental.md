---
layout: singlepage-overview
title: "Fewer Braces"
scala3: true
---

<!-- THIS FILE HAS BEEN GENERATED BY SCALADOC PREPROCESSOR.
    The whole process of generation the docs can be found under this README: https://github.com/lampepfl/dotty/blob/master/docs/README.md
    The source file can be found here https://github.com/lampepfl/dotty/edit/master/docs/docs/reference/other-new-features/indentation-experimental.md
    NOTE THAT ANY CHANGES TO THIS FILE WILL BE OVERRIDEN BY PREPROCESSOR.
-->

By and large, the possible indentation regions coincide with those regions where braces `{...}` are also legal, no matter whether the braces enclose an expression or a set of definitions. There is one exception, though: Arguments to function can be enclosed in braces but they cannot be simply indented instead. Making indentation always significant for function arguments would be too restrictive and fragile.

To allow such arguments to be written without braces, a variant of the indentation scheme is implemented under language import

<div class="snippet" scala-snippet ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >import language.experimental.fewerBraces
</span></code></pre></div>

Alternatively, it can be enabled with command line option `-language:experimental.fewerBraces`.

This variant is more contentious and less stable than the rest of the significant indentation scheme. It allows to replace a function argument in braces by a `:` at the end of a line and indented code, similar to the convention for class bodies. It also allows to leave out braces around arguments that are multi-line function values.

## Using `:` At End Of Line

Similar to what is done for classes and objects, a `:` that follows a function reference at the end of a line means braces can be omitted for function arguments. Example:

<div class="snippet" scala-snippet ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >times(10):
</span><span id="1" class="" >  println(&quot;ah&quot;)
</span><span id="2" class="" >  println(&quot;ha&quot;)
</span></code></pre></div>

The colon can also follow an infix operator:

<div class="snippet" scala-snippet ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >credentials ++ :
</span><span id="1" class="" >  val file = Path.userHome / &quot;.credentials&quot;
</span><span id="2" class="" >  if file.exists
</span><span id="3" class="" >  then Seq(Credentials(file))
</span><span id="4" class="" >  else Seq()
</span></code></pre></div>

Function calls that take multiple argument lists can also be handled this way:

<div class="snippet" scala-snippet ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >val firstLine = files.get(fileName).fold:
</span><span id="1" class="" >    val fileNames = files.values
</span><span id="2" class="" >    s&quot;&quot;&quot;no file named $fileName found among
</span><span id="3" class="" >      |${values.mkString(\n)}&quot;&quot;&quot;.stripMargin
</span><span id="4" class="" >  :
</span><span id="5" class="" >    f =&gt;
</span><span id="6" class="" >      val lines = f.iterator.map(_.readLine)
</span><span id="7" class="" >      lines.mkString(&quot;\n)
</span></code></pre></div>

## Lambda Arguments Without Braces

Braces can also be omitted around multiple line function value arguments:

<div class="snippet" scala-snippet ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >val xs = elems.map x =&gt;
</span><span id="1" class="" >  val y = x - 1
</span><span id="2" class="" >  y * y
</span><span id="3" class="" >xs.foldLeft (x, y) =&gt;
</span><span id="4" class="" >  x + y
</span></code></pre></div>

Braces can be omitted if the lambda starts with a parameter list and `=>` or `=>?` at the end of one line and it has an indented body on the following lines.

## Syntax Changes

```
SimpleExpr       ::=  ...
                   |  SimpleExpr `:` IndentedArgument
                   |  SimpleExpr FunParams (‘=>’ | ‘?=>’) IndentedArgument
InfixExpr        ::=  ...
                   |  InfixExpr id `:` IndentedArgument
IndentedArgument ::=  indent (CaseClauses | Block) outdent
```

Note that a lambda argument must have the `=>` at the end of a line for braces
to be optional. For instance, the following would also be incorrect:

<div class="snippet" scala-snippet ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >xs.map x =&gt; x + 1   // error: braces or parentheses are required
</span></code></pre></div>

The lambda has to be enclosed in braces or parentheses:

<div class="snippet" scala-snippet ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >xs.map(x =&gt; x + 1)  // ok
</span></code></pre></div>
