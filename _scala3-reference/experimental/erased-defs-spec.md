---
layout: singlepage-overview
title: "Erased Definitions: More Details"
scala3: true
---

<!-- THIS FILE HAS BEEN GENERATED BY SCALADOC PREPROCESSOR.
    The whole process of generation the docs can be found under this README: https://github.com/lampepfl/dotty/blob/master/docs/README.md
    The source file can be found here https://github.com/lampepfl/dotty/edit/master/docs/docs/reference/experimental/erased-defs-spec.md
    NOTE THAT ANY CHANGES TO THIS FILE WILL BE OVERRIDEN BY PREPROCESSOR.
-->

TODO: complete

## Rules

1. `erased` is a soft modifier. It can appear:

   * At the start of a parameter block of a method, function or class
   * In a method definition
   * In a `val` definition (but not `lazy val` or `var`)
   * In a `class` or `trait` definition
   <div class="snippet" ><div class="buttons"></div><pre><code class="language-scala"><span id="0" class="" >erased val x = ...
   </span><span id="1" class="" >erased def f = ...
   </span><span id="2" class="" >
   </span><span id="3" class="" >def g(erased x: Int) = ...
   </span><span id="4" class="" >
   </span><span id="5" class="" >(erased x: Int) =&gt; ...
   </span><span id="6" class="" >def h(x: (erased Int) =&gt; Int) = ...
   </span><span id="7" class="" >
   </span><span id="8" class="" >class K(erased x: Int) { ... }
   </span><span id="9" class="" >erased class E {}
   </span></code></pre></div>2. A reference to an `erased` val or def can only be used

   * Inside the expression of argument to an `erased` parameter
   * Inside the body of an `erased` `val` or `def`
3. Functions

   * `(erased x1: T1, x2: T2, ..., xN: TN) => y : (erased T1, T2, ..., TN) => R`
   * `(given erased x1: T1, x2: T2, ..., xN: TN) => y: (given erased T1, T2, ..., TN) => R`
   * `(given erased T1) => R  <:<  erased T1 => R`
   * `(given erased T1, T2) => R  <:< (erased T1, T2) => R`
   * ...

   Note that there is no subtype relation between `(erased T) => R` and `T => R` (or `(given erased T) => R` and `(given T) => R`)

4. Eta expansion

   if `def f(erased x: T): U` then `f: (erased T) => U`.

5. Erasure semantics

   * All `erased` parameters are removed from the function
   * All argument to `erased` parameters are not passed to the function
   * All `erased` definitions are removed
   * All `(erased T1, T2, ..., TN) => R` and `(given erased T1, T2, ..., TN) => R` become `() => R`
6. Overloading

   Method with `erased` parameters will follow the normal overloading constraints after erasure.

7. Overriding

   * Member definitions overriding each other must both be `erased` or not be `erased`
   * `def foo(x: T): U` cannot be overridden by `def foo(erased x: T): U` and vice-versa

